Interrupt Vectors
    00000 940C 0065 JMP	__text_start|__start

Program Code (text area)
__text_start|__start:
    00065 E5CF      LDI	R28,0x5F
    00066 E0D4      LDI	R29,4
    00067 BFCD      OUT	0x3D,R28
    00068 BFDE      OUT	0x3E,R29
    00069 51CE      SUBI	R28,0x1E
    0006A 40D0      SBCI	R29,0
    0006B EA0A      LDI	R16,0xAA
    0006C 8308      ST	Y,R16
    0006D 2400      CLR	R0
    0006E EAE1      LDI	R30,0xA1
    0006F E0F0      LDI	R31,0
    00070 E010      LDI	R17,0
    00071 3AE1      CPI	R30,0xA1
    00072 07F1      CPC	R31,R17
    00073 F011      BEQ	0x0076
    00074 9201      ST	Z+,R0
    00075 CFFB      RJMP	0x0071
    00076 8300      ST	Z,R16
    00077 E8E8      LDI	R30,0x88
    00078 E0F0      LDI	R31,0
    00079 E6A0      LDI	R26,0x60
    0007A E0B0      LDI	R27,0
    0007B E010      LDI	R17,0
    0007C E000      LDI	R16,0
    0007D BF0B      OUT	0x3B,R16
    0007E 3CE9      CPI	R30,0xC9
    0007F 07F1      CPC	R31,R17
    00080 F021      BEQ	0x0085
    00081 95C8      LPM
    00082 9631      ADIW	R30,1
    00083 920D      ST	X+,R0
    00084 CFF9      RJMP	0x007E
    00085 940E 00F8 CALL	_main
_exit:
    00087 CFFF      RJMP	_exit
FILE: F:\daima\AVR\ATmega16\4channl_adc\dianganceliang\source\adc.c
(0001) #include "adc.h"
(0002) #include "main.h"
(0003) 
(0004) // 通道索引
(0005) static unsigned char current_channel = 0;
(0006) 
(0007) void ADC_Init(void) {
(0008)     // 使能ADC，设置预分频为128（16MHz/128 = 125kHz）
(0009)     ADCSRA = (1 << ADEN) | (1 << ADPS2) | (1 << ADPS1) | (1 << ADPS0);
_ADC_Init:
    00088 E887      LDI	R24,0x87
    00089 B986      OUT	0x06,R24
(0010)     
(0011)     // 使用内部2.56V作为参考电压，右对齐结果
(0012)     // REFS1=1, REFS0=1 表示内部2.56V参考电压
(0013)      ADMUX = (1 << REFS1) | (1 << REFS0);
    0008A EC80      LDI	R24,0xC0
    0008B B987      OUT	0x07,R24
    0008C 9508      RET
(0014) }
(0015) 
(0016) void ADC_StartContinuousConversion(void) {
(0017)     // 清除通道选择位
(0018)     ADMUX &= 0xF0;
_ADC_StartContinuousConversion:
    0008D B187      IN	R24,0x07
    0008E 7F80      ANDI	R24,0xF0
    0008F B987      OUT	0x07,R24
(0019)     
(0020)     // 选择第一个通道
(0021)     ADMUX |= (current_channel & 0x0F);
    00090 9180 0060 LDS	R24,adc.c:current_channel
    00092 708F      ANDI	R24,0xF
    00093 B027      IN	R2,0x07
    00094 2A28      OR	R2,R24
    00095 B827      OUT	0x07,R2
(0022)     
(0023)     // 使能ADC完成中断
(0024)     ADCSRA |= (1 << ADIE);
    00096 9A33      SBI	0x06,3
(0025)     
(0026)     // 开始第一次转换
(0027)     ADCSRA |= (1 << ADSC);
    00097 9A36      SBI	0x06,6
    00098 9508      RET
_ADC_ReadChannel:
  high                 --> R12
  low                  --> R10
  channel              --> R16
    00099 940E 07E8 CALL	push_xgset003C
(0028) }
(0029) 
(0030) unsigned int ADC_ReadChannel(unsigned char channel) {
(0031)    
(0032)     unsigned char low;
(0033)     unsigned char high;
(0034)     // 确保通道号在0-7之间
(0035) 	
(0036)     channel &= 0x07;
    0009B 7007      ANDI	R16,7
(0037)     
(0038)     // 选择通道
(0039)     ADMUX = (ADMUX & 0xF0) | channel;
    0009C B187      IN	R24,0x07
    0009D 7F80      ANDI	R24,0xF0
    0009E 2B80      OR	R24,R16
    0009F B987      OUT	0x07,R24
(0040)     
(0041)     // 开始转换
(0042)     ADCSRA |= (1 << ADSC);
    000A0 9A36      SBI	0x06,6
(0043)     
(0044)     // 等待转换完成
(0045)     while (!(ADCSRA & (1 << ADIF)));
    000A1 9B34      SBIS	0x06,4
    000A2 CFFE      RJMP	0x00A1
(0046)     
(0047)     // 清除转换完成标志
(0048)     ADCSRA |= (1 << ADIF);
    000A3 9A34      SBI	0x06,4
(0049)     
(0050)     // 读取ADC值（10位）
(0051)      low = ADCL;
    000A4 B0A4      IN	R10,0x04
(0052)      high = ADCH;
    000A5 B0C5      IN	R12,0x05
(0053)     return ((high << 8) | low)-10;
    000A6 2D1C      MOV	R17,R12
    000A7 2D0A      MOV	R16,R10
    000A8 500A      SUBI	R16,0xA
    000A9 4010      SBCI	R17,0
    000AA 940C 07CD JMP	pop_xgset003C
(0054) }
(0055) 
(0056) void ADC_StopContinuousConversion(void) {
(0057)     // 禁用ADC完成中断
(0058)     ADCSRA &= ~(1 << ADIE);
_ADC_StopContinuousConversion:
    000AC 9833      CBI	0x06,3
    000AD 9508      RET
_ADC_ToVoltage:
  adc_value            --> R10
    000AE 92AA      ST	-Y,R10
    000AF 92BA      ST	-Y,R11
    000B0 0158      MOVW	R10,R16
(0059) }
(0060) 
(0061) float ADC_ToVoltage(unsigned int adc_value) {
(0062)     // 假设参考电压为5V，ADC为10位（0-1023）
(0063)     return (adc_value * 2.56) *1000/ 1023.0;
    000B1 E50C      LDI	R16,0x5C
    000B2 E010      LDI	R17,0
    000B3 940E 0800 CALL	lpm32
    000B5 0118      MOVW	R2,R16
    000B6 0129      MOVW	R4,R18
    000B7 E508      LDI	R16,0x58
    000B8 E010      LDI	R17,0
    000B9 940E 0800 CALL	lpm32
    000BB 0138      MOVW	R6,R16
    000BC 0149      MOVW	R8,R18
    000BD 0185      MOVW	R16,R10
    000BE 940E 08D4 CALL	uint2fp
    000C0 933A      ST	-Y,R19
    000C1 932A      ST	-Y,R18
    000C2 931A      ST	-Y,R17
    000C3 930A      ST	-Y,R16
    000C4 0183      MOVW	R16,R6
    000C5 0194      MOVW	R18,R8
    000C6 940E 0A93 CALL	fpmule2x
    000C8 0181      MOVW	R16,R2
    000C9 0192      MOVW	R18,R4
    000CA 940E 0A7B CALL	fpmule2
    000CC 0118      MOVW	R2,R16
    000CD 0129      MOVW	R4,R18
    000CE E504      LDI	R16,0x54
    000CF E010      LDI	R17,0
    000D0 940E 0800 CALL	lpm32
    000D2 933A      ST	-Y,R19
    000D3 932A      ST	-Y,R18
    000D4 931A      ST	-Y,R17
    000D5 930A      ST	-Y,R16
    000D6 0181      MOVW	R16,R2
    000D7 0192      MOVW	R18,R4
    000D8 940E 0901 CALL	fpdiv2
    000DA 90B9      LD	R11,Y+
    000DB 90A9      LD	R10,Y+
    000DC 9508      RET
_Delay_ms:
  i                    --> R20
  j                    --> R22
  ms                   --> R16
    000DD 940E 07ED CALL	push_xgsetF000
FILE: F:\daima\AVR\ATmega16\4channl_adc\dianganceliang\source\main.c
(0001) #include "main.h"
(0002) #include "uart.h"
(0003) #include "adc.h"
(0004) #include "keys.h"
(0005) 
(0006) 
(0007) // 全局变量定义
(0008) #pragma data:data  // 将变量放在数据段
(0009) volatile unsigned int ADC_Values[4] = {0};
(0010) volatile unsigned int ADC_Values_0[4] = {0};
(0011) volatile unsigned char ADC_Ready = 0;
(0012) 
(0013) unsigned char Key_Flags = FLAG_NONE;
(0014) 
(0015) DataPacket packet = {0x55,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0xFF};
(0016) #pragma data:data
(0017) 
(0018) // 简单的延时函数
(0019) void Delay_ms(unsigned int ms) {
(0020)     unsigned int i, j;
(0021)     for(i = 0; i < ms; i++) {
    000DF 2744      CLR	R20
    000E0 2755      CLR	R21
    000E1 C00C      RJMP	0x00EE
(0022)         for(j = 0; j < 1140; j++) {  // 16MHz时钟下的粗略延时
    000E2 2766      CLR	R22
    000E3 2777      CLR	R23
    000E4 C003      RJMP	0x00E8
(0023)             asm("nop");
    000E5 0000      NOP
    000E6 5F6F      SUBI	R22,0xFF
    000E7 4F7F      SBCI	R23,0xFF
    000E8 3764      CPI	R22,0x74
    000E9 E0E4      LDI	R30,4
    000EA 077E      CPC	R23,R30
    000EB F3C8      BCS	0x00E5
    000EC 5F4F      SUBI	R20,0xFF
    000ED 4F5F      SBCI	R21,0xFF
    000EE 1740      CP	R20,R16
    000EF 0751      CPC	R21,R17
    000F0 F388      BCS	0x00E2
    000F1 940C 07F2 JMP	pop_xgsetF000
(0024)         }
(0025)     }
(0026) }
(0027) 
(0028) 
(0029) void GPIO_Init(void) {
(0030)     // 将PD7设置为输出模式，其他位不变
(0031)     DDRD |= (1 << PD7);
_GPIO_Init:
    000F3 9A8F      SBI	0x11,7
(0032)     
(0033)     // 将PD7初始化为低电平
(0034)     PORTD &= (1 << PD7);
    000F4 B382      IN	R24,0x12
    000F5 7880      ANDI	R24,0x80
    000F6 BB82      OUT	0x12,R24
    000F7 9508      RET
(0035) }
(0036) 
(0037) 
(0038) 
(0039) int main(void) {
(0040)     // 系统初始化
(0041)     System_Init();
_main:
    000F8 D029      RCALL	_System_Init
    000F9 C026      RJMP	0x0120
(0042)     
(0043)     // 启动ADC连续采样
(0044)     //ADC_StartContinuousConversion();
(0045)    
(0046)     while(1) {
(0047) 	
(0048) 		Keys_Scan();
    000FA 940E 05A3 CALL	_Keys_Scan
(0049)         // 处理ADC数据
(0050)         
(0051)         
(0052)         // 发送数据包
(0053)        
(0054)         // 根据标志位处理数据
(0055)         if(Key_Flags & FLAG_OPEN_TEST) {
    000FC 9020 0072 LDS	R2,Key_Flags
    000FE FE20      SBRS	R2,0
    000FF C007      RJMP	0x0107
(0056)             // 开路检测完成，可以发送数据等操作
(0057)             // 发送数据包
(0058) 			Process_ADC_Data();
    00100 D029      RCALL	_Process_ADC_Data
(0059)             Key_Flags &= ~FLAG_OPEN_TEST;  // 清除标志位
    00101 9180 0072 LDS	R24,Key_Flags
    00103 7F8E      ANDI	R24,0xFE
    00104 9380 0072 STS	Key_Flags,R24
(0060) 			Send_Data_Packet();
    00106 D414      RCALL	_Send_Data_Packet
(0061)         }
(0062)         
(0063)         if(Key_Flags & FLAG_SHORT_TEST) {
    00107 9020 0072 LDS	R2,Key_Flags
    00109 FE21      SBRS	R2,1
    0010A C007      RJMP	0x0112
(0064)             // 短路检测完成，可以发送数据等操作
(0065)             // 发送数据包
(0066) 			Process_ADC_Data();
    0010B D01E      RCALL	_Process_ADC_Data
(0067)             Key_Flags &= ~FLAG_SHORT_TEST;  // 清除标志位
    0010C 9180 0072 LDS	R24,Key_Flags
    0010E 7F8D      ANDI	R24,0xFD
    0010F 9380 0072 STS	Key_Flags,R24
(0068) 			Send_Data_Packet();
    00111 D409      RCALL	_Send_Data_Packet
(0069)         }
(0070) 		
(0071) 		if(Key_Flags & FLAG_START) {
    00112 9020 0072 LDS	R2,Key_Flags
    00114 FE22      SBRS	R2,2
    00115 C007      RJMP	0x011D
(0072)             
(0073) 			Process_ADC_Data();
    00116 D013      RCALL	_Process_ADC_Data
(0074)             Key_Flags &= ~FLAG_START;  // 清除标志位
    00117 9180 0072 LDS	R24,Key_Flags
    00119 7F8B      ANDI	R24,0xFB
    0011A 9380 0072 STS	Key_Flags,R24
(0075) 			Send_Data_Packet();
    0011C D3FE      RCALL	_Send_Data_Packet
(0076)         }
(0077) 		//Send_Data_Packet();
(0078)         // 延时，控制发送速率（约10Hz）
(0079)         Delay_ms(100);
    0011D E604      LDI	R16,0x64
    0011E E010      LDI	R17,0
    0011F DFBD      RCALL	_Delay_ms
    00120 CFD9      RJMP	0x00FA
    00121 9508      RET
(0080)     }
(0081) 	return 0;
(0082) }
(0083) 
(0084) void System_Init(void) {
(0085)     // 初始化串口
(0086) 	Keys_Init();
_System_Init:
    00122 940E 059E CALL	_Keys_Init
(0087)     UART_Init();
    00124 940E 057B CALL	_UART_Init
(0088)     //GPIO_Init();
(0089)     // 初始化ADC
(0090)     ADC_Init();
    00126 940E 0088 CALL	_ADC_Init
(0091)     
(0092)     // 全局中断使能
(0093)     asm("sei");
    00128 9478      BSET	7
    00129 9508      RET
_Process_ADC_Data:
    0012A 92AA      ST	-Y,R10
    0012B 92BA      ST	-Y,R11
(0094) }
(0095) 
(0096) void Process_ADC_Data(void) {
(0097)     
(0098)         
(0099)         packet.adc0H = (unsigned int)ADC_Values[0]>>8;   //Iim
    0012C 9020 0061 LDS	R2,ADC_Values
    0012E 9030 0062 LDS	R3,ADC_Values+1
    00130 2C23      MOV	R2,R3
    00131 2433      CLR	R3
    00132 9220 0074 STS	packet+1,R2
(0100)         packet.adc0L = (unsigned char)ADC_Values[0];
    00134 9020 0061 LDS	R2,ADC_Values
    00136 9030 0062 LDS	R3,ADC_Values+1
    00138 9220 0075 STS	packet+2,R2
(0101)         packet.adc1H = (unsigned int)ADC_Values[1]>>8;	  //Ire
    0013A 9020 0063 LDS	R2,ADC_Values+2
    0013C 9030 0064 LDS	R3,ADC_Values+3
    0013E 2C23      MOV	R2,R3
    0013F 2433      CLR	R3
    00140 9220 0076 STS	packet+3,R2
(0102)         packet.adc1L = (unsigned char)ADC_Values[1];
    00142 9020 0063 LDS	R2,ADC_Values+2
    00144 9030 0064 LDS	R3,ADC_Values+3
    00146 9220 0077 STS	packet+4,R2
(0103) 		packet.adc2H = (unsigned int)ADC_Values[2]>>8;	  //Uim
    00148 9020 0065 LDS	R2,ADC_Values+4
    0014A 9030 0066 LDS	R3,ADC_Values+5
    0014C 2C23      MOV	R2,R3
    0014D 2433      CLR	R3
    0014E 9220 0078 STS	packet+5,R2
(0104)         packet.adc2L = (unsigned char)ADC_Values[2];
    00150 9020 0065 LDS	R2,ADC_Values+4
    00152 9030 0066 LDS	R3,ADC_Values+5
    00154 9220 0079 STS	packet+6,R2
(0105)         packet.adc3H = (unsigned int)ADC_Values[3]>>8;	  //Ure
    00156 9020 0067 LDS	R2,ADC_Values+6
    00158 9030 0068 LDS	R3,ADC_Values+7
    0015A 2C23      MOV	R2,R3
    0015B 2433      CLR	R3
    0015C 9220 007A STS	packet+7,R2
(0106)         packet.adc3L = (unsigned char)ADC_Values[3];
    0015E 9020 0067 LDS	R2,ADC_Values+6
    00160 9030 0068 LDS	R3,ADC_Values+7
    00162 9220 007B STS	packet+8,R2
(0107) 		
(0108) 		packet.adc00H = (unsigned int)(ADC_Values_0[0])>>8;   //Iim
    00164 9020 0069 LDS	R2,ADC_Values_0
    00166 9030 006A LDS	R3,ADC_Values_0+1
    00168 2C23      MOV	R2,R3
    00169 2433      CLR	R3
    0016A 9220 007C STS	packet+9,R2
(0109)         packet.adc00L = (unsigned char)(ADC_Values_0[0]);
    0016C 9020 0069 LDS	R2,ADC_Values_0
    0016E 9030 006A LDS	R3,ADC_Values_0+1
    00170 9220 007D STS	packet+10,R2
(0110)         packet.adc10H = (unsigned int)(ADC_Values_0[1])>>8;	  //Ire
    00172 9020 006B LDS	R2,ADC_Values_0+2
    00174 9030 006C LDS	R3,ADC_Values_0+3
    00176 2C23      MOV	R2,R3
    00177 2433      CLR	R3
    00178 9220 007E STS	packet+11,R2
(0111)         packet.adc10L = (unsigned char)(ADC_Values_0[1]);
    0017A 9020 006B LDS	R2,ADC_Values_0+2
    0017C 9030 006C LDS	R3,ADC_Values_0+3
    0017E 9220 007F STS	packet+12,R2
(0112) 		packet.adc20H = (unsigned int)(ADC_Values_0[2])>>8;	  //Uim
    00180 9020 006D LDS	R2,ADC_Values_0+4
    00182 9030 006E LDS	R3,ADC_Values_0+5
    00184 2C23      MOV	R2,R3
    00185 2433      CLR	R3
    00186 9220 0080 STS	packet+13,R2
(0113)         packet.adc20L = (unsigned char)(ADC_Values_0[2]);
    00188 9020 006D LDS	R2,ADC_Values_0+4
    0018A 9030 006E LDS	R3,ADC_Values_0+5
    0018C 9220 0081 STS	packet+14,R2
(0114)         packet.adc30H = (unsigned int)(ADC_Values_0[3])>>8;	  //Ure
    0018E 9020 006F LDS	R2,ADC_Values_0+6
    00190 9030 0070 LDS	R3,ADC_Values_0+7
    00192 2C23      MOV	R2,R3
    00193 2433      CLR	R3
    00194 9220 0082 STS	packet+15,R2
(0115)         packet.adc30L = (unsigned char)(ADC_Values_0[3]);
    00196 9020 006F LDS	R2,ADC_Values_0+6
    00198 9030 0070 LDS	R3,ADC_Values_0+7
    0019A 9220 0083 STS	packet+16,R2
(0116)         
(0117) 		packet.LH = (unsigned int)get_L_val()>>8;   //Iim
    0019C D314      RCALL	_get_L_val
    0019D 0118      MOVW	R2,R16
    0019E 2C23      MOV	R2,R3
    0019F 2433      CLR	R3
    001A0 9220 0084 STS	packet+17,R2
(0118)         packet.LL = (unsigned char)get_L_val();
    001A2 D30E      RCALL	_get_L_val
    001A3 9300 0085 STS	packet+18,R16
(0119)         packet.QH = (unsigned int)get_Q_val()>>8;	  //Ire
    001A5 D340      RCALL	_get_Q_val
    001A6 0158      MOVW	R10,R16
    001A7 0115      MOVW	R2,R10
    001A8 2C23      MOV	R2,R3
    001A9 2433      CLR	R3
    001AA 9220 0086 STS	packet+19,R2
(0120)         packet.QL = (unsigned char)get_Q_val();
    001AC D339      RCALL	_get_Q_val
    001AD 0158      MOVW	R10,R16
    001AE 92A0 0087 STS	packet+20,R10
    001B0 90B9      LD	R11,Y+
    001B1 90A9      LD	R10,Y+
    001B2 9508      RET
_L_Val_Calculation:
  R                    --> Y,+32
  Q                    --> Y,+28
  k                    --> Y,+24
  b                    --> Y,+20
  a                    --> Y,+16
  L                    --> Y,+12
  d                    --> Y,+8
  c                    --> Y,+4
  X                    --> Y,+0
  Iim0                 --> R10
  Ire0                 --> R14
  Uim0                 --> Y,+50
  Ure0                 --> Y,+48
  Iim                  --> Y,+46
  Ire                  --> Y,+44
  Uim                  --> Y,+42
  Ure                  --> R12
    001B3 933A      ST	-Y,R19
    001B4 932A      ST	-Y,R18
    001B5 940E 07E6 CALL	push_xgset00FC
    001B7 0168      MOVW	R12,R16
    001B8 97A4      SBIW	R28,0x24
    001B9 A8EC      LDD	R14,Y+52
    001BA A8FD      LDD	R15,Y+53
    001BB A8AE      LDD	R10,Y+54
    001BC A8BF      LDD	R11,Y+55
(0121) 		
(0122) 		
(0123) }
(0124) //计算电感值
(0125) unsigned int L_Val_Calculation(unsigned int Ure,unsigned int Uim,unsigned int Ire,unsigned int Iim,unsigned int Ure0,unsigned int Uim0,unsigned int Ire0,unsigned int Iim0)
(0126) {
(0127)  	  float a=1.f*Ure-Ure0;
    001BD E804      LDI	R16,0x84
    001BE E010      LDI	R17,0
    001BF 940E 0800 CALL	lpm32
    001C1 0118      MOVW	R2,R16
    001C2 0129      MOVW	R4,R18
    001C3 0186      MOVW	R16,R12
    001C4 940E 08D4 CALL	uint2fp
    001C6 933A      ST	-Y,R19
    001C7 932A      ST	-Y,R18
    001C8 931A      ST	-Y,R17
    001C9 930A      ST	-Y,R16
    001CA 0181      MOVW	R16,R2
    001CB 0192      MOVW	R18,R4
    001CC 940E 0A7B CALL	fpmule2
    001CE 0118      MOVW	R2,R16
    001CF 0129      MOVW	R4,R18
    001D0 A908      LDD	R16,Y+48
    001D1 A919      LDD	R17,Y+49
    001D2 940E 08D4 CALL	uint2fp
    001D4 933A      ST	-Y,R19
    001D5 932A      ST	-Y,R18
    001D6 931A      ST	-Y,R17
    001D7 930A      ST	-Y,R16
    001D8 0181      MOVW	R16,R2
    001D9 0192      MOVW	R18,R4
    001DA 940E 0897 CALL	fpsub2
    001DC 8B08      STD	Y+16,R16
    001DD 8B19      STD	Y+17,R17
    001DE 8B2A      STD	Y+18,R18
    001DF 8B3B      STD	Y+19,R19
(0128) 	  float b=1.f*Uim-Uim0;
    001E0 E804      LDI	R16,0x84
    001E1 E010      LDI	R17,0
    001E2 940E 0800 CALL	lpm32
    001E4 0118      MOVW	R2,R16
    001E5 0129      MOVW	R4,R18
    001E6 A50A      LDD	R16,Y+42
    001E7 A51B      LDD	R17,Y+43
    001E8 940E 08D4 CALL	uint2fp
    001EA 933A      ST	-Y,R19
    001EB 932A      ST	-Y,R18
    001EC 931A      ST	-Y,R17
    001ED 930A      ST	-Y,R16
    001EE 0181      MOVW	R16,R2
    001EF 0192      MOVW	R18,R4
    001F0 940E 0A7B CALL	fpmule2
    001F2 0118      MOVW	R2,R16
    001F3 0129      MOVW	R4,R18
    001F4 A90A      LDD	R16,Y+50
    001F5 A91B      LDD	R17,Y+51
    001F6 940E 08D4 CALL	uint2fp
    001F8 933A      ST	-Y,R19
    001F9 932A      ST	-Y,R18
    001FA 931A      ST	-Y,R17
    001FB 930A      ST	-Y,R16
    001FC 0181      MOVW	R16,R2
    001FD 0192      MOVW	R18,R4
    001FE 940E 0897 CALL	fpsub2
    00200 8B0C      STD	Y+20,R16
    00201 8B1D      STD	Y+21,R17
    00202 8B2E      STD	Y+22,R18
    00203 8B3F      STD	Y+23,R19
(0129) 	  float c=1.f*Ire-Ire0;
    00204 E804      LDI	R16,0x84
    00205 E010      LDI	R17,0
    00206 940E 0800 CALL	lpm32
    00208 0118      MOVW	R2,R16
    00209 0129      MOVW	R4,R18
    0020A A50C      LDD	R16,Y+44
    0020B A51D      LDD	R17,Y+45
    0020C 940E 08D4 CALL	uint2fp
    0020E 933A      ST	-Y,R19
    0020F 932A      ST	-Y,R18
    00210 931A      ST	-Y,R17
    00211 930A      ST	-Y,R16
    00212 0181      MOVW	R16,R2
    00213 0192      MOVW	R18,R4
    00214 940E 0A7B CALL	fpmule2
    00216 0118      MOVW	R2,R16
    00217 0129      MOVW	R4,R18
    00218 0187      MOVW	R16,R14
    00219 940E 08D4 CALL	uint2fp
    0021B 933A      ST	-Y,R19
    0021C 932A      ST	-Y,R18
    0021D 931A      ST	-Y,R17
    0021E 930A      ST	-Y,R16
    0021F 0181      MOVW	R16,R2
    00220 0192      MOVW	R18,R4
    00221 940E 0897 CALL	fpsub2
    00223 830C      STD	Y+4,R16
    00224 831D      STD	Y+5,R17
    00225 832E      STD	Y+6,R18
    00226 833F      STD	Y+7,R19
(0130) 	  float d=1.f*Iim-Iim0;
    00227 E804      LDI	R16,0x84
    00228 E010      LDI	R17,0
    00229 940E 0800 CALL	lpm32
    0022B 0118      MOVW	R2,R16
    0022C 0129      MOVW	R4,R18
    0022D A50E      LDD	R16,Y+46
    0022E A51F      LDD	R17,Y+47
    0022F 940E 08D4 CALL	uint2fp
    00231 933A      ST	-Y,R19
    00232 932A      ST	-Y,R18
    00233 931A      ST	-Y,R17
    00234 930A      ST	-Y,R16
    00235 0181      MOVW	R16,R2
    00236 0192      MOVW	R18,R4
    00237 940E 0A7B CALL	fpmule2
    00239 0118      MOVW	R2,R16
    0023A 0129      MOVW	R4,R18
    0023B 0185      MOVW	R16,R10
    0023C 940E 08D4 CALL	uint2fp
    0023E 933A      ST	-Y,R19
    0023F 932A      ST	-Y,R18
    00240 931A      ST	-Y,R17
    00241 930A      ST	-Y,R16
    00242 0181      MOVW	R16,R2
    00243 0192      MOVW	R18,R4
    00244 940E 0897 CALL	fpsub2
    00246 8708      STD	Y+8,R16
    00247 8719      STD	Y+9,R17
    00248 872A      STD	Y+10,R18
    00249 873B      STD	Y+11,R19
(0131) 	  float k=300.0f/503;
    0024A E800      LDI	R16,0x80
    0024B E010      LDI	R17,0
    0024C 940E 0800 CALL	lpm32
    0024E 8F08      STD	Y+24,R16
    0024F 8F19      STD	Y+25,R17
    00250 8F2A      STD	Y+26,R18
    00251 8F3B      STD	Y+27,R19
(0132) 	  float Q=0.f;
    00252 E70C      LDI	R16,0x7C
    00253 E010      LDI	R17,0
    00254 940E 0800 CALL	lpm32
    00256 8F0C      STD	Y+28,R16
    00257 8F1D      STD	Y+29,R17
    00258 8F2E      STD	Y+30,R18
    00259 8F3F      STD	Y+31,R19
(0133) 	  float L=0.f;
    0025A E70C      LDI	R16,0x7C
    0025B E010      LDI	R17,0
    0025C 940E 0800 CALL	lpm32
    0025E 870C      STD	Y+12,R16
    0025F 871D      STD	Y+13,R17
    00260 872E      STD	Y+14,R18
    00261 873F      STD	Y+15,R19
(0134) 	  float R=0.f;
    00262 E70C      LDI	R16,0x7C
    00263 E010      LDI	R17,0
    00264 940E 0800 CALL	lpm32
    00266 A308      STD	Y+32,R16
    00267 A319      STD	Y+33,R17
    00268 A32A      STD	Y+34,R18
    00269 A33B      STD	Y+35,R19
(0135) 	  float X=0.f;
    0026A E70C      LDI	R16,0x7C
    0026B E010      LDI	R17,0
    0026C 940E 0800 CALL	lpm32
    0026E 8308      ST	Y,R16
    0026F 8319      STD	Y+1,R17
    00270 832A      STD	Y+2,R18
    00271 833B      STD	Y+3,R19
(0136) 	  //Q=(b*c-a*d)/(a*c+b*d);
(0137) 	 
(0138) 	  //R = (a*c+b*d)/(c*c+d*d);
(0139) 	  //R = 169.230975*R*R*R-30.520493*R*R+2.357366*R;
(0140) 	  X = (b*c-a*d)/(c*c+d*d)*k;
    00272 890C      LDD	R16,Y+20
    00273 891D      LDD	R17,Y+21
    00274 892E      LDD	R18,Y+22
    00275 893F      LDD	R19,Y+23
    00276 01CE      MOVW	R24,R28
    00277 9604      ADIW	R24,4
    00278 939A      ST	-Y,R25
    00279 938A      ST	-Y,R24
    0027A 940E 0A71 CALL	fpmule1
    0027C 0118      MOVW	R2,R16
    0027D 0129      MOVW	R4,R18
    0027E 8908      LDD	R16,Y+16
    0027F 8919      LDD	R17,Y+17
    00280 892A      LDD	R18,Y+18
    00281 893B      LDD	R19,Y+19
    00282 01CE      MOVW	R24,R28
    00283 9608      ADIW	R24,0x8
    00284 939A      ST	-Y,R25
    00285 938A      ST	-Y,R24
    00286 940E 0A86 CALL	fpmule1x
    00288 0181      MOVW	R16,R2
    00289 0192      MOVW	R18,R4
    0028A 940E 0897 CALL	fpsub2
    0028C 0118      MOVW	R2,R16
    0028D 0129      MOVW	R4,R18
    0028E 810C      LDD	R16,Y+4
    0028F 811D      LDD	R17,Y+5
    00290 812E      LDD	R18,Y+6
    00291 813F      LDD	R19,Y+7
    00292 01CE      MOVW	R24,R28
    00293 9604      ADIW	R24,4
    00294 939A      ST	-Y,R25
    00295 938A      ST	-Y,R24
    00296 940E 0A71 CALL	fpmule1
    00298 0138      MOVW	R6,R16
    00299 0149      MOVW	R8,R18
    0029A 8508      LDD	R16,Y+8
    0029B 8519      LDD	R17,Y+9
    0029C 852A      LDD	R18,Y+10
    0029D 853B      LDD	R19,Y+11
    0029E 01CE      MOVW	R24,R28
    0029F 9608      ADIW	R24,0x8
    002A0 939A      ST	-Y,R25
    002A1 938A      ST	-Y,R24
    002A2 940E 0A86 CALL	fpmule1x
    002A4 0183      MOVW	R16,R6
    002A5 0194      MOVW	R18,R8
    002A6 940E 0889 CALL	fpadd2x
    002A8 0181      MOVW	R16,R2
    002A9 0192      MOVW	R18,R4
    002AA 940E 0901 CALL	fpdiv2
    002AC 01CE      MOVW	R24,R28
    002AD 9648      ADIW	R24,0x18
    002AE 939A      ST	-Y,R25
    002AF 938A      ST	-Y,R24
    002B0 940E 0A71 CALL	fpmule1
    002B2 8308      ST	Y,R16
    002B3 8319      STD	Y+1,R17
    002B4 832A      STD	Y+2,R18
    002B5 833B      STD	Y+3,R19
(0141) 	  X = 0.939445*X+0.003161;
    002B6 E708      LDI	R16,0x78
    002B7 E010      LDI	R17,0
    002B8 940E 0800 CALL	lpm32
    002BA 01CE      MOVW	R24,R28
    002BB 939A      ST	-Y,R25
    002BC 938A      ST	-Y,R24
    002BD 940E 0A71 CALL	fpmule1
    002BF 0118      MOVW	R2,R16
    002C0 0129      MOVW	R4,R18
    002C1 E704      LDI	R16,0x74
    002C2 E010      LDI	R17,0
    002C3 940E 0800 CALL	lpm32
    002C5 933A      ST	-Y,R19
    002C6 932A      ST	-Y,R18
    002C7 931A      ST	-Y,R17
    002C8 930A      ST	-Y,R16
    002C9 0181      MOVW	R16,R2
    002CA 0192      MOVW	R18,R4
    002CB 940E 087E CALL	fpadd2
    002CD 8308      ST	Y,R16
    002CE 8319      STD	Y+1,R17
    002CF 832A      STD	Y+2,R18
    002D0 833B      STD	Y+3,R19
(0142) 	  
(0143) 	  L = X*1000.f*1000.f/(2*3.1415*1010.f);
    002D1 E700      LDI	R16,0x70
    002D2 E010      LDI	R17,0
    002D3 940E 0800 CALL	lpm32
    002D5 0118      MOVW	R2,R16
    002D6 0129      MOVW	R4,R18
    002D7 E700      LDI	R16,0x70
    002D8 E010      LDI	R17,0
    002D9 940E 0800 CALL	lpm32
    002DB 01CE      MOVW	R24,R28
    002DC 939A      ST	-Y,R25
    002DD 938A      ST	-Y,R24
    002DE 940E 0A86 CALL	fpmule1x
    002E0 0181      MOVW	R16,R2
    002E1 0192      MOVW	R18,R4
    002E2 940E 0A7B CALL	fpmule2
    002E4 0118      MOVW	R2,R16
    002E5 0129      MOVW	R4,R18
    002E6 E60C      LDI	R16,0x6C
    002E7 E010      LDI	R17,0
    002E8 940E 0800 CALL	lpm32
    002EA 933A      ST	-Y,R19
    002EB 932A      ST	-Y,R18
    002EC 931A      ST	-Y,R17
    002ED 930A      ST	-Y,R16
    002EE 0181      MOVW	R16,R2
    002EF 0192      MOVW	R18,R4
    002F0 940E 0901 CALL	fpdiv2
    002F2 870C      STD	Y+12,R16
    002F3 871D      STD	Y+13,R17
    002F4 872E      STD	Y+14,R18
    002F5 873F      STD	Y+15,R19
(0144) 	 
(0145) 	  return L*100;
    002F6 E608      LDI	R16,0x68
    002F7 E010      LDI	R17,0
    002F8 940E 0800 CALL	lpm32
    002FA 01CE      MOVW	R24,R28
    002FB 960C      ADIW	R24,0xC
    002FC 939A      ST	-Y,R25
    002FD 938A      ST	-Y,R24
    002FE 940E 0A71 CALL	fpmule1
    00300 940E 08A2 CALL	fpint
    00302 96A4      ADIW	R28,0x24
    00303 940E 07D2 CALL	pop_xgset00FC
    00305 9622      ADIW	R28,2
    00306 9508      RET
_Q_Val_Calculation:
  Q                    --> Y,+28
  k                    --> Y,+24
  b                    --> Y,+20
  a                    --> Y,+16
  X                    --> Y,+12
  R                    --> Y,+8
  d                    --> Y,+4
  c                    --> Y,+0
  Iim0                 --> R10
  Ire0                 --> R14
  Uim0                 --> Y,+46
  Ure0                 --> Y,+44
  Iim                  --> Y,+42
  Ire                  --> Y,+40
  Uim                  --> Y,+38
  Ure                  --> R12
    00307 933A      ST	-Y,R19
    00308 932A      ST	-Y,R18
    00309 940E 07E6 CALL	push_xgset00FC
    0030B 0168      MOVW	R12,R16
    0030C 97A0      SBIW	R28,0x20
    0030D A8E8      LDD	R14,Y+48
    0030E A8F9      LDD	R15,Y+49
    0030F A8AA      LDD	R10,Y+50
    00310 A8BB      LDD	R11,Y+51
(0146) }
(0147) 
(0148) 
(0149) //计算Q值
(0150) unsigned int Q_Val_Calculation(unsigned int Ure,unsigned int Uim,unsigned int Ire,unsigned int Iim,unsigned int Ure0,unsigned int Uim0,unsigned int Ire0,unsigned int Iim0)
(0151) {
(0152)  	  float a=1.f*Ure-Ure0;
    00311 E804      LDI	R16,0x84
    00312 E010      LDI	R17,0
    00313 940E 0800 CALL	lpm32
    00315 0118      MOVW	R2,R16
    00316 0129      MOVW	R4,R18
    00317 0186      MOVW	R16,R12
    00318 940E 08D4 CALL	uint2fp
    0031A 933A      ST	-Y,R19
    0031B 932A      ST	-Y,R18
    0031C 931A      ST	-Y,R17
    0031D 930A      ST	-Y,R16
    0031E 0181      MOVW	R16,R2
    0031F 0192      MOVW	R18,R4
    00320 940E 0A7B CALL	fpmule2
    00322 0118      MOVW	R2,R16
    00323 0129      MOVW	R4,R18
    00324 A50C      LDD	R16,Y+44
    00325 A51D      LDD	R17,Y+45
    00326 940E 08D4 CALL	uint2fp
    00328 933A      ST	-Y,R19
    00329 932A      ST	-Y,R18
    0032A 931A      ST	-Y,R17
    0032B 930A      ST	-Y,R16
    0032C 0181      MOVW	R16,R2
    0032D 0192      MOVW	R18,R4
    0032E 940E 0897 CALL	fpsub2
    00330 8B08      STD	Y+16,R16
    00331 8B19      STD	Y+17,R17
    00332 8B2A      STD	Y+18,R18
    00333 8B3B      STD	Y+19,R19
(0153) 	  float b=1.f*Uim-Uim0;
    00334 E804      LDI	R16,0x84
    00335 E010      LDI	R17,0
    00336 940E 0800 CALL	lpm32
    00338 0118      MOVW	R2,R16
    00339 0129      MOVW	R4,R18
    0033A A10E      LDD	R16,Y+38
    0033B A11F      LDD	R17,Y+39
    0033C 940E 08D4 CALL	uint2fp
    0033E 933A      ST	-Y,R19
    0033F 932A      ST	-Y,R18
    00340 931A      ST	-Y,R17
    00341 930A      ST	-Y,R16
    00342 0181      MOVW	R16,R2
    00343 0192      MOVW	R18,R4
    00344 940E 0A7B CALL	fpmule2
    00346 0118      MOVW	R2,R16
    00347 0129      MOVW	R4,R18
    00348 A50E      LDD	R16,Y+46
    00349 A51F      LDD	R17,Y+47
    0034A 940E 08D4 CALL	uint2fp
    0034C 933A      ST	-Y,R19
    0034D 932A      ST	-Y,R18
    0034E 931A      ST	-Y,R17
    0034F 930A      ST	-Y,R16
    00350 0181      MOVW	R16,R2
    00351 0192      MOVW	R18,R4
    00352 940E 0897 CALL	fpsub2
    00354 8B0C      STD	Y+20,R16
    00355 8B1D      STD	Y+21,R17
    00356 8B2E      STD	Y+22,R18
    00357 8B3F      STD	Y+23,R19
(0154) 	  float c=1.f*Ire-Ire0;
    00358 E804      LDI	R16,0x84
    00359 E010      LDI	R17,0
    0035A 940E 0800 CALL	lpm32
    0035C 0118      MOVW	R2,R16
    0035D 0129      MOVW	R4,R18
    0035E A508      LDD	R16,Y+40
    0035F A519      LDD	R17,Y+41
    00360 940E 08D4 CALL	uint2fp
    00362 933A      ST	-Y,R19
    00363 932A      ST	-Y,R18
    00364 931A      ST	-Y,R17
    00365 930A      ST	-Y,R16
    00366 0181      MOVW	R16,R2
    00367 0192      MOVW	R18,R4
    00368 940E 0A7B CALL	fpmule2
    0036A 0118      MOVW	R2,R16
    0036B 0129      MOVW	R4,R18
    0036C 0187      MOVW	R16,R14
    0036D 940E 08D4 CALL	uint2fp
    0036F 933A      ST	-Y,R19
    00370 932A      ST	-Y,R18
    00371 931A      ST	-Y,R17
    00372 930A      ST	-Y,R16
    00373 0181      MOVW	R16,R2
    00374 0192      MOVW	R18,R4
    00375 940E 0897 CALL	fpsub2
    00377 8308      ST	Y,R16
    00378 8319      STD	Y+1,R17
    00379 832A      STD	Y+2,R18
    0037A 833B      STD	Y+3,R19
(0155) 	  float d=1.f*Iim-Iim0;
    0037B E804      LDI	R16,0x84
    0037C E010      LDI	R17,0
    0037D 940E 0800 CALL	lpm32
    0037F 0118      MOVW	R2,R16
    00380 0129      MOVW	R4,R18
    00381 A50A      LDD	R16,Y+42
    00382 A51B      LDD	R17,Y+43
    00383 940E 08D4 CALL	uint2fp
    00385 933A      ST	-Y,R19
    00386 932A      ST	-Y,R18
    00387 931A      ST	-Y,R17
    00388 930A      ST	-Y,R16
    00389 0181      MOVW	R16,R2
    0038A 0192      MOVW	R18,R4
    0038B 940E 0A7B CALL	fpmule2
    0038D 0118      MOVW	R2,R16
    0038E 0129      MOVW	R4,R18
    0038F 0185      MOVW	R16,R10
    00390 940E 08D4 CALL	uint2fp
    00392 933A      ST	-Y,R19
    00393 932A      ST	-Y,R18
    00394 931A      ST	-Y,R17
    00395 930A      ST	-Y,R16
    00396 0181      MOVW	R16,R2
    00397 0192      MOVW	R18,R4
    00398 940E 0897 CALL	fpsub2
    0039A 830C      STD	Y+4,R16
    0039B 831D      STD	Y+5,R17
    0039C 832E      STD	Y+6,R18
    0039D 833F      STD	Y+7,R19
(0156) 	   float k=1.f*300/503;
    0039E E800      LDI	R16,0x80
    0039F E010      LDI	R17,0
    003A0 940E 0800 CALL	lpm32
    003A2 8F08      STD	Y+24,R16
    003A3 8F19      STD	Y+25,R17
    003A4 8F2A      STD	Y+26,R18
    003A5 8F3B      STD	Y+27,R19
(0157) 	  float Q=0.f;
    003A6 E70C      LDI	R16,0x7C
    003A7 E010      LDI	R17,0
    003A8 940E 0800 CALL	lpm32
    003AA 8F0C      STD	Y+28,R16
    003AB 8F1D      STD	Y+29,R17
    003AC 8F2E      STD	Y+30,R18
    003AD 8F3F      STD	Y+31,R19
(0158) 	  float R=0.f;
    003AE E70C      LDI	R16,0x7C
    003AF E010      LDI	R17,0
    003B0 940E 0800 CALL	lpm32
    003B2 8708      STD	Y+8,R16
    003B3 8719      STD	Y+9,R17
    003B4 872A      STD	Y+10,R18
    003B5 873B      STD	Y+11,R19
(0159) 	  float X=0.f;
    003B6 E70C      LDI	R16,0x7C
    003B7 E010      LDI	R17,0
    003B8 940E 0800 CALL	lpm32
    003BA 870C      STD	Y+12,R16
    003BB 871D      STD	Y+13,R17
    003BC 872E      STD	Y+14,R18
    003BD 873F      STD	Y+15,R19
(0160) 	  //Q=(b*c-a*d)/(a*c+b*d);
(0161) 	  R = (a*c+b*d)/(c*c+d*d)*k;
    003BE 8908      LDD	R16,Y+16
    003BF 8919      LDD	R17,Y+17
    003C0 892A      LDD	R18,Y+18
    003C1 893B      LDD	R19,Y+19
    003C2 01CE      MOVW	R24,R28
    003C3 939A      ST	-Y,R25
    003C4 938A      ST	-Y,R24
    003C5 940E 0A71 CALL	fpmule1
    003C7 0118      MOVW	R2,R16
    003C8 0129      MOVW	R4,R18
    003C9 890C      LDD	R16,Y+20
    003CA 891D      LDD	R17,Y+21
    003CB 892E      LDD	R18,Y+22
    003CC 893F      LDD	R19,Y+23
    003CD 01CE      MOVW	R24,R28
    003CE 9604      ADIW	R24,4
    003CF 939A      ST	-Y,R25
    003D0 938A      ST	-Y,R24
    003D1 940E 0A86 CALL	fpmule1x
    003D3 0181      MOVW	R16,R2
    003D4 0192      MOVW	R18,R4
    003D5 940E 087E CALL	fpadd2
    003D7 0118      MOVW	R2,R16
    003D8 0129      MOVW	R4,R18
    003D9 8108      LD	R16,Y
    003DA 8119      LDD	R17,Y+1
    003DB 812A      LDD	R18,Y+2
    003DC 813B      LDD	R19,Y+3
    003DD 01CE      MOVW	R24,R28
    003DE 939A      ST	-Y,R25
    003DF 938A      ST	-Y,R24
    003E0 940E 0A71 CALL	fpmule1
    003E2 0138      MOVW	R6,R16
    003E3 0149      MOVW	R8,R18
    003E4 810C      LDD	R16,Y+4
    003E5 811D      LDD	R17,Y+5
    003E6 812E      LDD	R18,Y+6
    003E7 813F      LDD	R19,Y+7
    003E8 01CE      MOVW	R24,R28
    003E9 9604      ADIW	R24,4
    003EA 939A      ST	-Y,R25
    003EB 938A      ST	-Y,R24
    003EC 940E 0A86 CALL	fpmule1x
    003EE 0183      MOVW	R16,R6
    003EF 0194      MOVW	R18,R8
    003F0 940E 0889 CALL	fpadd2x
    003F2 0181      MOVW	R16,R2
    003F3 0192      MOVW	R18,R4
    003F4 940E 0901 CALL	fpdiv2
    003F6 01CE      MOVW	R24,R28
    003F7 9648      ADIW	R24,0x18
    003F8 939A      ST	-Y,R25
    003F9 938A      ST	-Y,R24
    003FA 940E 0A71 CALL	fpmule1
    003FC 8708      STD	Y+8,R16
    003FD 8719      STD	Y+9,R17
    003FE 872A      STD	Y+10,R18
    003FF 873B      STD	Y+11,R19
(0162) 	  R = -2.600288*R*R+0.916240*R;
    00400 E604      LDI	R16,0x64
    00401 E010      LDI	R17,0
    00402 940E 0800 CALL	lpm32
    00404 01CE      MOVW	R24,R28
    00405 9608      ADIW	R24,0x8
    00406 939A      ST	-Y,R25
    00407 938A      ST	-Y,R24
    00408 940E 0A71 CALL	fpmule1
    0040A 01CE      MOVW	R24,R28
    0040B 9608      ADIW	R24,0x8
    0040C 939A      ST	-Y,R25
    0040D 938A      ST	-Y,R24
    0040E 940E 0A71 CALL	fpmule1
    00410 0118      MOVW	R2,R16
    00411 0129      MOVW	R4,R18
    00412 E600      LDI	R16,0x60
    00413 E010      LDI	R17,0
    00414 940E 0800 CALL	lpm32
    00416 01CE      MOVW	R24,R28
    00417 9608      ADIW	R24,0x8
    00418 939A      ST	-Y,R25
    00419 938A      ST	-Y,R24
    0041A 940E 0A86 CALL	fpmule1x
    0041C 0181      MOVW	R16,R2
    0041D 0192      MOVW	R18,R4
    0041E 940E 087E CALL	fpadd2
    00420 8708      STD	Y+8,R16
    00421 8719      STD	Y+9,R17
    00422 872A      STD	Y+10,R18
    00423 873B      STD	Y+11,R19
(0163) 	  
(0164) 	  X = (b*c-a*d)/(c*c+d*d)*k;
    00424 890C      LDD	R16,Y+20
    00425 891D      LDD	R17,Y+21
    00426 892E      LDD	R18,Y+22
    00427 893F      LDD	R19,Y+23
    00428 01CE      MOVW	R24,R28
    00429 939A      ST	-Y,R25
    0042A 938A      ST	-Y,R24
    0042B 940E 0A71 CALL	fpmule1
    0042D 0118      MOVW	R2,R16
    0042E 0129      MOVW	R4,R18
    0042F 8908      LDD	R16,Y+16
    00430 8919      LDD	R17,Y+17
    00431 892A      LDD	R18,Y+18
    00432 893B      LDD	R19,Y+19
    00433 01CE      MOVW	R24,R28
    00434 9604      ADIW	R24,4
    00435 939A      ST	-Y,R25
    00436 938A      ST	-Y,R24
    00437 940E 0A86 CALL	fpmule1x
    00439 0181      MOVW	R16,R2
    0043A 0192      MOVW	R18,R4
    0043B 940E 0897 CALL	fpsub2
    0043D 0118      MOVW	R2,R16
    0043E 0129      MOVW	R4,R18
    0043F 8108      LD	R16,Y
    00440 8119      LDD	R17,Y+1
    00441 812A      LDD	R18,Y+2
    00442 813B      LDD	R19,Y+3
    00443 01CE      MOVW	R24,R28
    00444 939A      ST	-Y,R25
    00445 938A      ST	-Y,R24
    00446 940E 0A71 CALL	fpmule1
    00448 0138      MOVW	R6,R16
    00449 0149      MOVW	R8,R18
    0044A 810C      LDD	R16,Y+4
    0044B 811D      LDD	R17,Y+5
    0044C 812E      LDD	R18,Y+6
    0044D 813F      LDD	R19,Y+7
    0044E 01CE      MOVW	R24,R28
    0044F 9604      ADIW	R24,4
    00450 939A      ST	-Y,R25
    00451 938A      ST	-Y,R24
    00452 940E 0A86 CALL	fpmule1x
    00454 0183      MOVW	R16,R6
    00455 0194      MOVW	R18,R8
    00456 940E 0889 CALL	fpadd2x
    00458 0181      MOVW	R16,R2
    00459 0192      MOVW	R18,R4
    0045A 940E 0901 CALL	fpdiv2
    0045C 01CE      MOVW	R24,R28
    0045D 9648      ADIW	R24,0x18
    0045E 939A      ST	-Y,R25
    0045F 938A      ST	-Y,R24
    00460 940E 0A71 CALL	fpmule1
    00462 870C      STD	Y+12,R16
    00463 871D      STD	Y+13,R17
    00464 872E      STD	Y+14,R18
    00465 873F      STD	Y+15,R19
(0165) 	  X = 0.939445*X+0.003161;
    00466 E708      LDI	R16,0x78
    00467 E010      LDI	R17,0
    00468 940E 0800 CALL	lpm32
    0046A 01CE      MOVW	R24,R28
    0046B 960C      ADIW	R24,0xC
    0046C 939A      ST	-Y,R25
    0046D 938A      ST	-Y,R24
    0046E 940E 0A71 CALL	fpmule1
    00470 0118      MOVW	R2,R16
    00471 0129      MOVW	R4,R18
    00472 E704      LDI	R16,0x74
    00473 E010      LDI	R17,0
    00474 940E 0800 CALL	lpm32
    00476 933A      ST	-Y,R19
    00477 932A      ST	-Y,R18
    00478 931A      ST	-Y,R17
    00479 930A      ST	-Y,R16
    0047A 0181      MOVW	R16,R2
    0047B 0192      MOVW	R18,R4
    0047C 940E 087E CALL	fpadd2
    0047E 870C      STD	Y+12,R16
    0047F 871D      STD	Y+13,R17
    00480 872E      STD	Y+14,R18
    00481 873F      STD	Y+15,R19
(0166) 	 
(0167) 	  Q=X*1.f/R*1.f;
    00482 E804      LDI	R16,0x84
    00483 E010      LDI	R17,0
    00484 940E 0800 CALL	lpm32
    00486 0118      MOVW	R2,R16
    00487 0129      MOVW	R4,R18
    00488 E804      LDI	R16,0x84
    00489 E010      LDI	R17,0
    0048A 940E 0800 CALL	lpm32
    0048C 01CE      MOVW	R24,R28
    0048D 960C      ADIW	R24,0xC
    0048E 939A      ST	-Y,R25
    0048F 938A      ST	-Y,R24
    00490 940E 0A71 CALL	fpmule1
    00492 01CE      MOVW	R24,R28
    00493 9608      ADIW	R24,0x8
    00494 939A      ST	-Y,R25
    00495 938A      ST	-Y,R24
    00496 940E 090B CALL	fpdiv1x
    00498 0181      MOVW	R16,R2
    00499 0192      MOVW	R18,R4
    0049A 940E 0A7B CALL	fpmule2
    0049C 8F0C      STD	Y+28,R16
    0049D 8F1D      STD	Y+29,R17
    0049E 8F2E      STD	Y+30,R18
    0049F 8F3F      STD	Y+31,R19
(0168) 	  
(0169) 	 
(0170) 	  return Q*100;
    004A0 E608      LDI	R16,0x68
    004A1 E010      LDI	R17,0
    004A2 940E 0800 CALL	lpm32
    004A4 01CE      MOVW	R24,R28
    004A5 964C      ADIW	R24,0x1C
    004A6 939A      ST	-Y,R25
    004A7 938A      ST	-Y,R24
    004A8 940E 0A71 CALL	fpmule1
    004AA 940E 08A2 CALL	fpint
    004AC 96A0      ADIW	R28,0x20
    004AD 940E 07D2 CALL	pop_xgset00FC
    004AF 9622      ADIW	R28,2
    004B0 9508      RET
_get_L_val:
  L                    --> R10
    004B1 92AA      ST	-Y,R10
    004B2 92BA      ST	-Y,R11
    004B3 972C      SBIW	R28,0xC
(0171) 	  
(0172) 	  //L=(b*c-a*d)/(c*c+d*d)*k/(2*3.14*1000);
(0173) 	  
(0174) 	  
(0175) }
(0176) 
(0177) unsigned int get_L_val(void)
(0178) {		 
(0179)     unsigned int L;
(0180)     L=L_Val_Calculation(ADC_Values[3],ADC_Values[2],ADC_Values[1],ADC_Values[0],ADC_Values_0[3],ADC_Values_0[2],ADC_Values_0[1],ADC_Values_0[0]);
    004B4 9020 0069 LDS	R2,ADC_Values_0
    004B6 9030 006A LDS	R3,ADC_Values_0+1
    004B8 863B      STD	Y+11,R3
    004B9 862A      STD	Y+10,R2
    004BA 9020 006B LDS	R2,ADC_Values_0+2
    004BC 9030 006C LDS	R3,ADC_Values_0+3
    004BE 8639      STD	Y+9,R3
    004BF 8628      STD	Y+8,R2
    004C0 9020 006D LDS	R2,ADC_Values_0+4
    004C2 9030 006E LDS	R3,ADC_Values_0+5
    004C4 823F      STD	Y+7,R3
    004C5 822E      STD	Y+6,R2
    004C6 9020 006F LDS	R2,ADC_Values_0+6
    004C8 9030 0070 LDS	R3,ADC_Values_0+7
    004CA 823D      STD	Y+5,R3
    004CB 822C      STD	Y+4,R2
    004CC 9020 0061 LDS	R2,ADC_Values
    004CE 9030 0062 LDS	R3,ADC_Values+1
    004D0 823B      STD	Y+3,R3
    004D1 822A      STD	Y+2,R2
    004D2 9020 0063 LDS	R2,ADC_Values+2
    004D4 9030 0064 LDS	R3,ADC_Values+3
    004D6 8239      STD	Y+1,R3
    004D7 8228      ST	Y,R2
    004D8 9120 0065 LDS	R18,ADC_Values+4
    004DA 9130 0066 LDS	R19,ADC_Values+5
    004DC 9100 0067 LDS	R16,ADC_Values+6
    004DE 9110 0068 LDS	R17,ADC_Values+7
    004E0 DCD2      RCALL	_L_Val_Calculation
    004E1 0158      MOVW	R10,R16
(0181)     return L;
    004E2 962C      ADIW	R28,0xC
    004E3 90B9      LD	R11,Y+
    004E4 90A9      LD	R10,Y+
    004E5 9508      RET
_get_Q_val:
  Q                    --> R10
    004E6 92AA      ST	-Y,R10
    004E7 92BA      ST	-Y,R11
    004E8 972C      SBIW	R28,0xC
(0182) }
(0183) 
(0184) unsigned int get_Q_val(void)
(0185) {
(0186)     unsigned int Q;
(0187)     Q=Q_Val_Calculation(ADC_Values[3],ADC_Values[2],ADC_Values[1],ADC_Values[0],ADC_Values_0[3],ADC_Values_0[2],ADC_Values_0[1],ADC_Values_0[0]);
    004E9 9020 0069 LDS	R2,ADC_Values_0
    004EB 9030 006A LDS	R3,ADC_Values_0+1
    004ED 863B      STD	Y+11,R3
    004EE 862A      STD	Y+10,R2
    004EF 9020 006B LDS	R2,ADC_Values_0+2
    004F1 9030 006C LDS	R3,ADC_Values_0+3
    004F3 8639      STD	Y+9,R3
    004F4 8628      STD	Y+8,R2
    004F5 9020 006D LDS	R2,ADC_Values_0+4
    004F7 9030 006E LDS	R3,ADC_Values_0+5
    004F9 823F      STD	Y+7,R3
    004FA 822E      STD	Y+6,R2
    004FB 9020 006F LDS	R2,ADC_Values_0+6
    004FD 9030 0070 LDS	R3,ADC_Values_0+7
    004FF 823D      STD	Y+5,R3
    00500 822C      STD	Y+4,R2
    00501 9020 0061 LDS	R2,ADC_Values
    00503 9030 0062 LDS	R3,ADC_Values+1
    00505 823B      STD	Y+3,R3
    00506 822A      STD	Y+2,R2
    00507 9020 0063 LDS	R2,ADC_Values+2
    00509 9030 0064 LDS	R3,ADC_Values+3
    0050B 8239      STD	Y+1,R3
    0050C 8228      ST	Y,R2
    0050D 9120 0065 LDS	R18,ADC_Values+4
    0050F 9130 0066 LDS	R19,ADC_Values+5
    00511 9100 0067 LDS	R16,ADC_Values+6
    00513 9110 0068 LDS	R17,ADC_Values+7
    00515 DDF1      RCALL	_Q_Val_Calculation
    00516 0158      MOVW	R10,R16
(0188)     return Q;
    00517 962C      ADIW	R28,0xC
    00518 90B9      LD	R11,Y+
    00519 90A9      LD	R10,Y+
    0051A 9508      RET
(0189) }
(0190) 
(0191) void Send_Data_Packet(void) {
(0192)     // 发送帧头
(0193)     UART_Transmit(packet.header);
_Send_Data_Packet:
    0051B 9100 0073 LDS	R16,packet
    0051D 940E 0584 CALL	_UART_Transmit
(0194)     
(0195)     // 发送ADC数据
(0196)     UART_Transmit(packet.adc0H);
    0051F 9100 0074 LDS	R16,packet+1
    00521 940E 0584 CALL	_UART_Transmit
(0197)     UART_Transmit(packet.adc0L);
    00523 9100 0075 LDS	R16,packet+2
    00525 940E 0584 CALL	_UART_Transmit
(0198)     UART_Transmit(packet.adc1H);
    00527 9100 0076 LDS	R16,packet+3
    00529 940E 0584 CALL	_UART_Transmit
(0199)     UART_Transmit(packet.adc1L);
    0052B 9100 0077 LDS	R16,packet+4
    0052D 940E 0584 CALL	_UART_Transmit
(0200) 	UART_Transmit(packet.adc2H);
    0052F 9100 0078 LDS	R16,packet+5
    00531 940E 0584 CALL	_UART_Transmit
(0201)     UART_Transmit(packet.adc2L);
    00533 9100 0079 LDS	R16,packet+6
    00535 940E 0584 CALL	_UART_Transmit
(0202) 	UART_Transmit(packet.adc3H);
    00537 9100 007A LDS	R16,packet+7
    00539 940E 0584 CALL	_UART_Transmit
(0203)     UART_Transmit(packet.adc3L);
    0053B 9100 007B LDS	R16,packet+8
    0053D 940E 0584 CALL	_UART_Transmit
(0204) 	
(0205) 	UART_Transmit(packet.LH);
    0053F 9100 0084 LDS	R16,packet+17
    00541 940E 0584 CALL	_UART_Transmit
(0206)     UART_Transmit(packet.LL);
    00543 9100 0085 LDS	R16,packet+18
    00545 940E 0584 CALL	_UART_Transmit
(0207) 	UART_Transmit(packet.QH);
    00547 9100 0086 LDS	R16,packet+19
    00549 940E 0584 CALL	_UART_Transmit
(0208)     UART_Transmit(packet.QL);
    0054B 9100 0087 LDS	R16,packet+20
    0054D 940E 0584 CALL	_UART_Transmit
(0209) 	
(0210) 	UART_Transmit(packet.adc00H);
    0054F 9100 007C LDS	R16,packet+9
    00551 940E 0584 CALL	_UART_Transmit
(0211)     UART_Transmit(packet.adc00L);
    00553 9100 007D LDS	R16,packet+10
    00555 940E 0584 CALL	_UART_Transmit
(0212)     UART_Transmit(packet.adc10H);
    00557 9100 007E LDS	R16,packet+11
    00559 940E 0584 CALL	_UART_Transmit
(0213)     UART_Transmit(packet.adc10L);
    0055B 9100 007F LDS	R16,packet+12
    0055D 940E 0584 CALL	_UART_Transmit
(0214) 	UART_Transmit(packet.adc20H);
    0055F 9100 0080 LDS	R16,packet+13
    00561 940E 0584 CALL	_UART_Transmit
(0215)     UART_Transmit(packet.adc20L);
    00563 9100 0081 LDS	R16,packet+14
    00565 940E 0584 CALL	_UART_Transmit
(0216) 	UART_Transmit(packet.adc30H);
    00567 9100 0082 LDS	R16,packet+15
    00569 940E 0584 CALL	_UART_Transmit
(0217)     UART_Transmit(packet.adc30L);
    0056B 9100 0083 LDS	R16,packet+16
    0056D 940E 0584 CALL	_UART_Transmit
(0218)     
(0219)     // 发送帧尾
(0220)     UART_Transmit(packet.footer);
    0056F 9100 0088 LDS	R16,packet+21
    00571 940E 0584 CALL	_UART_Transmit
(0221) 	UART_Transmit(packet.footer);
    00573 9100 0088 LDS	R16,packet+21
    00575 940E 0584 CALL	_UART_Transmit
(0222) 	UART_Transmit(packet.footer);
    00577 9100 0088 LDS	R16,packet+21
    00579 940C 0584 JMP	_UART_Transmit
FILE: F:\daima\AVR\ATmega16\4channl_adc\dianganceliang\source\uart.c
(0001) #include "uart.h"
(0002) 
(0003) #define BAUD 9600
(0004) #define BAUD_PRESCALE (((16000000 / (BAUD * 16UL))) - 1)
(0005) 
(0006) void UART_Init(void) {
(0007)     // 设置波特率
(0008)     UBRRH = (unsigned char)(BAUD_PRESCALE >> 8);
_UART_Init:
    0057B 2422      CLR	R2
    0057C BC20      OUT	0x20,R2
(0009)     UBRRL = (unsigned char)(BAUD_PRESCALE);
    0057D E687      LDI	R24,0x67
    0057E B989      OUT	0x09,R24
(0010)     
(0011)     // 使能接收和发送
(0012)     UCSRB = (1 << RXEN) | (1 << TXEN);
    0057F E188      LDI	R24,0x18
    00580 B98A      OUT	0x0A,R24
(0013)     
(0014)     // 设置帧格式: 8位数据位，1位停止位，无奇偶校验
(0015)     UCSRC = (1 << URSEL) | (1 << UCSZ1) | (1 << UCSZ0);
    00581 E886      LDI	R24,0x86
    00582 BD80      OUT	0x20,R24
    00583 9508      RET
(0016) }
(0017) 
(0018) void UART_Transmit(unsigned char data) {
(0019)     // 等待发送缓冲区为空
(0020)     while (!(UCSRA & (1 << UDRE)));
_UART_Transmit:
  data                 --> R16
    00584 9B5D      SBIS	0x0B,5
    00585 CFFE      RJMP	_UART_Transmit
(0021)     
(0022)     // 发送数据
(0023)     UDR = data;
    00586 B90C      OUT	0x0C,R16
    00587 9508      RET
(0024) }
(0025) 
(0026) unsigned char UART_Receive(void) {
(0027)     // 等待接收到数据
(0028)     while (!(UCSRA & (1 << RXC)));
_UART_Receive:
    00588 9B5F      SBIS	0x0B,7
    00589 CFFE      RJMP	_UART_Receive
(0029)     
(0030)     // 返回接收到的数据
(0031)     return UDR;
    0058A B10C      IN	R16,0x0C
    0058B 9508      RET
(0032) }
(0033) 
(0034) unsigned char UART_DataAvailable(void) {
(0035)     // 检查是否有数据可读
(0036)     return (UCSRA & (1 << RXC));
_UART_DataAvailable:
    0058C B10B      IN	R16,0x0B
    0058D 7800      ANDI	R16,0x80
    0058E 9508      RET
_UART_TransmitString:
  str                  --> R10
    0058F 92AA      ST	-Y,R10
    00590 92BA      ST	-Y,R11
    00591 0158      MOVW	R10,R16
(0037) }
(0038) 
(0039) void UART_TransmitString(const char* str) {
    00592 C004      RJMP	0x0597
(0040)     while (*str) {
(0041)         UART_Transmit(*str++);
    00593 01F5      MOVW	R30,R10
    00594 9101      LD	R16,Z+
    00595 015F      MOVW	R10,R30
    00596 DFED      RCALL	_UART_Transmit
    00597 01F5      MOVW	R30,R10
    00598 8020      LD	R2,Z
    00599 2022      TST	R2
    0059A F7C1      BNE	0x0593
    0059B 90B9      LD	R11,Y+
    0059C 90A9      LD	R10,Y+
    0059D 9508      RET
FILE: F:\daima\AVR\ATmega16\4channl_adc\dianganceliang\source\keys.c
(0001) #include "keys.h"
(0002) #include "main.h"
(0003) #include "adc.h"
(0004) 
(0005) // 内部变量
(0006) static unsigned char key_open_debounce = 0;
(0007) static unsigned char key_short_debounce = 0;
(0008) static unsigned char key_clear_debounce = 0;
(0009) extern volatile unsigned int ADC_Values_0[4] ;
(0010) extern volatile unsigned int ADC_Values[4] ;
(0011) unsigned int sum[4]={0};
(0012) unsigned int ADC_buf[4]={0};
(0013) unsigned char i = 0;
(0014) unsigned char j = 0;
(0015) // 按键初始化
(0016) void Keys_Init(void) {
(0017)     // 设置PD2, PD3为输入（外接上拉电阻）
(0018)     DDRD &= ~((1 << KEY_OPEN) | (1 << KEY_SHORT));
_Keys_Init:
    0059E B381      IN	R24,0x11
    0059F 7F83      ANDI	R24,0xF3
    005A0 BB81      OUT	0x11,R24
(0019)     
(0020)     // 设置PC4为输入（外接上拉电阻）
(0021)     DDRC &= ~(1 << KEY_CLEAR);
    005A1 98A4      CBI	0x14,4
    005A2 9508      RET
_Keys_Scan:
  key_start_current    --> R10
  key_short_current    --> R12
  key_open_current     --> R14
    005A3 940E 07E4 CALL	push_xgset30FC
(0022)     
(0023)     // 如果需要，可以启用内部上拉（如果外接上拉电阻，可以不启用）
(0024)     // PORTD |= (1 << KEY_OPEN) | (1 << KEY_SHORT);
(0025)     // PORTC |= (1 << KEY_CLEAR);
(0026) }
(0027) 
(0028) // 按键扫描函数
(0029) void Keys_Scan(void) {
(0030)     static unsigned char key_open_last = 1;
(0031)     static unsigned char key_short_last = 1;
(0032)     static unsigned char key_start_last = 1;
(0033)     unsigned char key_open_current, key_short_current, key_start_current;
(0034)     
(0035)     // 读取当前按键状态（按键按下为0，释放为1）
(0036)     key_open_current = (PIND & (1 << KEY_OPEN)) ? 1 : 0;
    005A5 9B82      SBIS	0x10,2
    005A6 C003      RJMP	0x05AA
    005A7 E041      LDI	R20,1
    005A8 E050      LDI	R21,0
    005A9 C002      RJMP	0x05AC
    005AA 2744      CLR	R20
    005AB 2755      CLR	R21
    005AC 2EE4      MOV	R14,R20
(0037)     key_short_current = (PIND & (1 << KEY_SHORT)) ? 1 : 0;
    005AD 9B83      SBIS	0x10,3
    005AE C003      RJMP	0x05B2
    005AF E041      LDI	R20,1
    005B0 E050      LDI	R21,0
    005B1 C002      RJMP	0x05B4
    005B2 2744      CLR	R20
    005B3 2755      CLR	R21
    005B4 2EC4      MOV	R12,R20
(0038)     key_start_current = (PINC & (1 << KEY_CLEAR)) ? 1 : 0;
    005B5 9B9C      SBIS	0x13,4
    005B6 C003      RJMP	0x05BA
    005B7 E041      LDI	R20,1
    005B8 E050      LDI	R21,0
    005B9 C002      RJMP	0x05BC
    005BA 2744      CLR	R20
    005BB 2755      CLR	R21
    005BC 2EA4      MOV	R10,R20
(0039)     
(0040)     // D2按键处理（开路检测）
(0041)     if(key_open_current == 0 && key_open_last == 1) {  // 下降沿检测
    005BD 20EE      TST	R14
    005BE F459      BNE	0x05CA
    005BF 9180 009E LDS	R24,keys.c:key_open_last
    005C1 3081      CPI	R24,1
    005C2 F439      BNE	0x05CA
(0042)         if(key_open_debounce == 0) {
    005C3 9020 0089 LDS	R2,keys.c:key_open_debounce
    005C5 2022      TST	R2
    005C6 F419      BNE	0x05CA
(0043)             key_open_debounce = 10;  // 启动消抖计时
    005C7 E08A      LDI	R24,0xA
    005C8 9380 0089 STS	keys.c:key_open_debounce,R24
(0044)         }
(0045)     }
(0046)     
(0047)     if(key_open_debounce > 0) {
    005CA E080      LDI	R24,0
    005CB 9020 0089 LDS	R2,keys.c:key_open_debounce
    005CD 1582      CP	R24,R2
    005CE F008      BCS	0x05D0
    005CF C092      RJMP	0x0662
(0048)         key_open_debounce--;
    005D0 2D82      MOV	R24,R2
    005D1 5081      SUBI	R24,1
    005D2 9380 0089 STS	keys.c:key_open_debounce,R24
(0049)         if(key_open_debounce == 0) {
    005D4 2388      TST	R24
    005D5 F009      BEQ	0x05D7
    005D6 C08B      RJMP	0x0662
(0050)             // 再次检测按键状态，确认按下
(0051)             if((PIND & (1 << KEY_OPEN)) == 0) {
    005D7 9982      SBIC	0x10,2
    005D8 C089      RJMP	0x0662
(0052)                for( i = 0; i < 10; i++) {
    005D9 2422      CLR	R2
    005DA 9220 009C STS	i,R2
    005DC C03A      RJMP	0x0617
(0053)     					sum[0] += ADC_ReadChannel(0);  // 通道0
    005DD 2700      CLR	R16
    005DE 940E 0099 CALL	_ADC_ReadChannel
    005E0 9020 008C LDS	R2,sum
    005E2 9030 008D LDS	R3,sum+1
    005E4 0E20      ADD	R2,R16
    005E5 1E31      ADC	R3,R17
    005E6 9230 008D STS	sum+1,R3
    005E8 9220 008C STS	sum,R2
(0054)     					sum[1] += ADC_ReadChannel(1);  // 通道1
    005EA E001      LDI	R16,1
    005EB 940E 0099 CALL	_ADC_ReadChannel
    005ED 9020 008E LDS	R2,sum+2
    005EF 9030 008F LDS	R3,sum+3
    005F1 0E20      ADD	R2,R16
    005F2 1E31      ADC	R3,R17
    005F3 9230 008F STS	sum+3,R3
    005F5 9220 008E STS	sum+2,R2
(0055)     					sum[2] += ADC_ReadChannel(2);  // 通道2
    005F7 E002      LDI	R16,2
    005F8 940E 0099 CALL	_ADC_ReadChannel
    005FA 9020 0090 LDS	R2,sum+4
    005FC 9030 0091 LDS	R3,sum+5
    005FE 0E20      ADD	R2,R16
    005FF 1E31      ADC	R3,R17
    00600 9230 0091 STS	sum+5,R3
    00602 9220 0090 STS	sum+4,R2
(0056)     					sum[3] += ADC_ReadChannel(3);  // 通道3
    00604 E003      LDI	R16,3
    00605 940E 0099 CALL	_ADC_ReadChannel
    00607 01A8      MOVW	R20,R16
    00608 9020 0092 LDS	R2,sum+6
    0060A 9030 0093 LDS	R3,sum+7
    0060C 0E20      ADD	R2,R16
    0060D 1E31      ADC	R3,R17
    0060E 9230 0093 STS	sum+7,R3
    00610 9220 0092 STS	sum+6,R2
    00612 9180 009C LDS	R24,i
    00614 5F8F      SUBI	R24,0xFF
    00615 9380 009C STS	i,R24
    00617 9180 009C LDS	R24,i
    00619 308A      CPI	R24,0xA
    0061A F210      BCS	0x05DD
(0057) 				}
(0058) 				 		
(0059) 				 	
(0060) 				// 计算平均值
(0061) 					ADC_Values[0] = sum[0]/10;  // 通道0平均值
    0061B E02A      LDI	R18,0xA
    0061C E030      LDI	R19,0
    0061D 9100 008C LDS	R16,sum
    0061F 9110 008D LDS	R17,sum+1
    00621 940E 07B3 CALL	div16u
    00623 9310 0062 STS	ADC_Values+1,R17
    00625 9300 0061 STS	ADC_Values,R16
(0062) 					ADC_Values[1] = sum[1]/10;  // 通道1平均值
    00627 E02A      LDI	R18,0xA
    00628 E030      LDI	R19,0
    00629 9100 008E LDS	R16,sum+2
    0062B 9110 008F LDS	R17,sum+3
    0062D 940E 07B3 CALL	div16u
    0062F 9310 0064 STS	ADC_Values+3,R17
    00631 9300 0063 STS	ADC_Values+2,R16
(0063) 					ADC_Values[2] = sum[2]/10;  // 通道2平均值
    00633 E02A      LDI	R18,0xA
    00634 E030      LDI	R19,0
    00635 9100 0090 LDS	R16,sum+4
    00637 9110 0091 LDS	R17,sum+5
    00639 940E 07B3 CALL	div16u
    0063B 9310 0066 STS	ADC_Values+5,R17
    0063D 9300 0065 STS	ADC_Values+4,R16
(0064) 					ADC_Values[3] = sum[3]/10;  // 通道3平均值
    0063F E02A      LDI	R18,0xA
    00640 E030      LDI	R19,0
    00641 9100 0092 LDS	R16,sum+6
    00643 9110 0093 LDS	R17,sum+7
    00645 940E 07B3 CALL	div16u
    00647 9310 0068 STS	ADC_Values+7,R17
    00649 9300 0067 STS	ADC_Values+6,R16
(0065) 					sum[0] = 0;  // 通道0
    0064B 2422      CLR	R2
    0064C 2433      CLR	R3
    0064D 9230 008D STS	sum+1,R3
    0064F 9220 008C STS	sum,R2
(0066)     				sum[1] = 0;  // 通道1
    00651 9230 008F STS	sum+3,R3
    00653 9220 008E STS	sum+2,R2
(0067)     				sum[2] = 0;  // 通道2
    00655 9230 0091 STS	sum+5,R3
    00657 9220 0090 STS	sum+4,R2
(0068)     				sum[3] = 0;  // 通道3
    00659 9230 0093 STS	sum+7,R3
    0065B 9220 0092 STS	sum+6,R2
(0069) 					Key_Flags |= FLAG_OPEN_TEST;
    0065D 9180 0072 LDS	R24,Key_Flags
    0065F 6081      ORI	R24,1
    00660 9380 0072 STS	Key_Flags,R24
(0070)             }
(0071)         }
(0072)     }
(0073)     
(0074)     // D3按键处理（短路检测）
(0075)     if(key_short_current == 0 && key_short_last == 1) {  // 下降沿检测
    00662 20CC      TST	R12
    00663 F459      BNE	0x066F
    00664 9180 009F LDS	R24,keys.c:key_short_last
    00666 3081      CPI	R24,1
    00667 F439      BNE	0x066F
(0076)         if(key_short_debounce == 0) {
    00668 9020 008A LDS	R2,keys.c:key_short_debounce
    0066A 2022      TST	R2
    0066B F419      BNE	0x066F
(0077)             key_short_debounce = 10;  // 启动消抖计时
    0066C E08A      LDI	R24,0xA
    0066D 9380 008A STS	keys.c:key_short_debounce,R24
(0078)         }
(0079)     }
(0080)     
(0081)     if(key_short_debounce > 0) {
    0066F E080      LDI	R24,0
    00670 9020 008A LDS	R2,keys.c:key_short_debounce
    00672 1582      CP	R24,R2
    00673 F008      BCS	0x0675
    00674 C0AC      RJMP	0x0721
(0082)         key_short_debounce--;
    00675 2D82      MOV	R24,R2
    00676 5081      SUBI	R24,1
    00677 9380 008A STS	keys.c:key_short_debounce,R24
(0083)         if(key_short_debounce == 0) {
    00679 2388      TST	R24
    0067A F009      BEQ	0x067C
    0067B C0A5      RJMP	0x0721
(0084)             // 再次检测按键状态，确认按下
(0085)             if((PIND & (1 << KEY_SHORT)) == 0) {
    0067C 9983      SBIC	0x10,3
    0067D C0A3      RJMP	0x0721
(0086)                 // 执行短路检测
(0087)                /* ADC_Values_0[2]=ADC_ReadChannel(2);
(0088) 				ADC_Values_0[3]=ADC_ReadChannel(3);*/
(0089) 				for( i = 0; i < 10; i++) {
    0067E 2422      CLR	R2
    0067F 9220 009C STS	i,R2
    00681 C03A      RJMP	0x06BC
(0090)     					sum[0] += ADC_ReadChannel(0);  // 通道0
    00682 2700      CLR	R16
    00683 940E 0099 CALL	_ADC_ReadChannel
    00685 9020 008C LDS	R2,sum
    00687 9030 008D LDS	R3,sum+1
    00689 0E20      ADD	R2,R16
    0068A 1E31      ADC	R3,R17
    0068B 9230 008D STS	sum+1,R3
    0068D 9220 008C STS	sum,R2
(0091)     					sum[1] += ADC_ReadChannel(1);  // 通道1
    0068F E001      LDI	R16,1
    00690 940E 0099 CALL	_ADC_ReadChannel
    00692 9020 008E LDS	R2,sum+2
    00694 9030 008F LDS	R3,sum+3
    00696 0E20      ADD	R2,R16
    00697 1E31      ADC	R3,R17
    00698 9230 008F STS	sum+3,R3
    0069A 9220 008E STS	sum+2,R2
(0092)     					sum[2] += ADC_ReadChannel(2);  // 通道2
    0069C E002      LDI	R16,2
    0069D 940E 0099 CALL	_ADC_ReadChannel
    0069F 9020 0090 LDS	R2,sum+4
    006A1 9030 0091 LDS	R3,sum+5
    006A3 0E20      ADD	R2,R16
    006A4 1E31      ADC	R3,R17
    006A5 9230 0091 STS	sum+5,R3
    006A7 9220 0090 STS	sum+4,R2
(0093)     					sum[3] += ADC_ReadChannel(3);  // 通道3
    006A9 E003      LDI	R16,3
    006AA 940E 0099 CALL	_ADC_ReadChannel
    006AC 01A8      MOVW	R20,R16
    006AD 9020 0092 LDS	R2,sum+6
    006AF 9030 0093 LDS	R3,sum+7
    006B1 0E20      ADD	R2,R16
    006B2 1E31      ADC	R3,R17
    006B3 9230 0093 STS	sum+7,R3
    006B5 9220 0092 STS	sum+6,R2
    006B7 9180 009C LDS	R24,i
    006B9 5F8F      SUBI	R24,0xFF
    006BA 9380 009C STS	i,R24
    006BC 9180 009C LDS	R24,i
    006BE 308A      CPI	R24,0xA
    006BF F210      BCS	0x0682
(0094) 				}
(0095) 				 		for(j=0;j<4;j++)
    006C0 2422      CLR	R2
    006C1 9220 009D STS	j,R2
    006C3 C041      RJMP	0x0705
(0096) 						{
(0097) 						  ADC_buf[j] = sum[j]/10;  // 通道0平均值
    006C4 9140 009D LDS	R20,j
    006C6 2755      CLR	R21
    006C7 0F44      LSL	R20
    006C8 1F55      ROL	R21
    006C9 E88C      LDI	R24,0x8C
    006CA E090      LDI	R25,0
    006CB 01FA      MOVW	R30,R20
    006CC 0FE8      ADD	R30,R24
    006CD 1FF9      ADC	R31,R25
    006CE 8100      LD	R16,Z
    006CF 8111      LDD	R17,Z+1
    006D0 E02A      LDI	R18,0xA
    006D1 E030      LDI	R19,0
    006D2 940E 07B3 CALL	div16u
    006D4 E984      LDI	R24,0x94
    006D5 E090      LDI	R25,0
    006D6 01FA      MOVW	R30,R20
    006D7 0FE8      ADD	R30,R24
    006D8 1FF9      ADC	R31,R25
    006D9 8311      STD	Z+1,R17
    006DA 8300      ST	Z,R16
(0098) 						  if(450<ADC_buf[j]&&ADC_buf[j]<550){
    006DB 91E0 009D LDS	R30,j
    006DD 27FF      CLR	R31
    006DE 0FEE      LSL	R30
    006DF 1FFF      ROL	R31
    006E0 0FE8      ADD	R30,R24
    006E1 1FF9      ADC	R31,R25
    006E2 8140      LD	R20,Z
    006E3 8151      LDD	R21,Z+1
    006E4 EC82      LDI	R24,0xC2
    006E5 E091      LDI	R25,1
    006E6 1784      CP	R24,R20
    006E7 0795      CPC	R25,R21
    006E8 F4B8      BCC	0x0700
    006E9 3246      CPI	R20,0x26
    006EA E0E2      LDI	R30,2
    006EB 075E      CPC	R21,R30
    006EC F498      BCC	0x0700
(0099) 						  	ADC_Values_0[j]=ADC_buf[j];		 
    006ED 9140 009D LDS	R20,j
    006EF 2755      CLR	R21
    006F0 0F44      LSL	R20
    006F1 1F55      ROL	R21
    006F2 E984      LDI	R24,0x94
    006F3 E090      LDI	R25,0
    006F4 01FA      MOVW	R30,R20
    006F5 0FE8      ADD	R30,R24
    006F6 1FF9      ADC	R31,R25
    006F7 8020      LD	R2,Z
    006F8 8031      LDD	R3,Z+1
    006F9 E689      LDI	R24,0x69
    006FA E090      LDI	R25,0
    006FB 01FA      MOVW	R30,R20
    006FC 0FE8      ADD	R30,R24
    006FD 1FF9      ADC	R31,R25
    006FE 8231      STD	Z+1,R3
    006FF 8220      ST	Z,R2
    00700 9180 009D LDS	R24,j
    00702 5F8F      SUBI	R24,0xFF
    00703 9380 009D STS	j,R24
    00705 9180 009D LDS	R24,j
    00707 3084      CPI	R24,4
    00708 F408      BCC	0x070A
    00709 CFBA      RJMP	0x06C4
(0100) 						  }
(0101) 						}
(0102) 				// 计算平均值
(0103) 					sum[0] = 0;  // 通道0
    0070A 2422      CLR	R2
    0070B 2433      CLR	R3
    0070C 9230 008D STS	sum+1,R3
    0070E 9220 008C STS	sum,R2
(0104)     				sum[1] = 0;  // 通道1
    00710 9230 008F STS	sum+3,R3
    00712 9220 008E STS	sum+2,R2
(0105)     				sum[2] = 0;  // 通道2
    00714 9230 0091 STS	sum+5,R3
    00716 9220 0090 STS	sum+4,R2
(0106)     				sum[3] = 0;  // 通道3
    00718 9230 0093 STS	sum+7,R3
    0071A 9220 0092 STS	sum+6,R2
(0107) 					
(0108)                 Key_Flags |= FLAG_SHORT_TEST;
    0071C 9180 0072 LDS	R24,Key_Flags
    0071E 6082      ORI	R24,2
    0071F 9380 0072 STS	Key_Flags,R24
(0109)             }
(0110)         }
(0111)     }
(0112)     
(0113)     // C4按键处理
(0114)     if(key_start_current == 0 && key_start_last == 1) {
    00721 20AA      TST	R10
    00722 F459      BNE	0x072E
    00723 9180 00A0 LDS	R24,keys.c:key_start_last
    00725 3081      CPI	R24,1
    00726 F439      BNE	0x072E
(0115)         if(key_clear_debounce == 0) {
    00727 9020 008B LDS	R2,keys.c:key_clear_debounce
    00729 2022      TST	R2
    0072A F419      BNE	0x072E
(0116)             key_clear_debounce = 10;  // 启动消抖计时
    0072B E08A      LDI	R24,0xA
    0072C 9380 008B STS	keys.c:key_clear_debounce,R24
(0117) 			
(0118)         }
(0119)     }
(0120)     
(0121)     if(key_clear_debounce > 0) {
    0072E E080      LDI	R24,0
    0072F 9020 008B LDS	R2,keys.c:key_clear_debounce
    00731 1582      CP	R24,R2
    00732 F008      BCS	0x0734
    00733 C060      RJMP	0x0794
(0122)         key_clear_debounce--;
    00734 2D82      MOV	R24,R2
    00735 5081      SUBI	R24,1
    00736 9380 008B STS	keys.c:key_clear_debounce,R24
(0123)         if(key_clear_debounce == 0) {
    00738 2388      TST	R24
    00739 F009      BEQ	0x073B
    0073A C059      RJMP	0x0794
(0124)             // 再次检测按键状态，确认按下
(0125)             if((PINC & (1 << KEY_CLEAR)) == 0) {
    0073B 999C      SBIC	0x13,4
    0073C C057      RJMP	0x0794
(0126)                 for( i = 0; i < 10; i++) {
    0073D 2422      CLR	R2
    0073E 9220 009C STS	i,R2
    00740 C020      RJMP	0x0761
(0127)     					sum[0] += ADC_ReadChannel(0);  // 通道0
    00741 2700      CLR	R16
    00742 940E 0099 CALL	_ADC_ReadChannel
    00744 9020 008C LDS	R2,sum
    00746 9030 008D LDS	R3,sum+1
    00748 0E20      ADD	R2,R16
    00749 1E31      ADC	R3,R17
    0074A 9230 008D STS	sum+1,R3
    0074C 9220 008C STS	sum,R2
(0128)     					sum[1] += ADC_ReadChannel(1);  // 通道1
    0074E E001      LDI	R16,1
    0074F 940E 0099 CALL	_ADC_ReadChannel
    00751 01A8      MOVW	R20,R16
    00752 9020 008E LDS	R2,sum+2
    00754 9030 008F LDS	R3,sum+3
    00756 0E20      ADD	R2,R16
    00757 1E31      ADC	R3,R17
    00758 9230 008F STS	sum+3,R3
    0075A 9220 008E STS	sum+2,R2
    0075C 9180 009C LDS	R24,i
    0075E 5F8F      SUBI	R24,0xFF
    0075F 9380 009C STS	i,R24
    00761 9180 009C LDS	R24,i
    00763 308A      CPI	R24,0xA
    00764 F2E0      BCS	0x0741
(0129)     					//sum[2] += ADC_ReadChannel(2);  // 通道2
(0130)     					//sum[3] += ADC_ReadChannel(3);  // 通道3
(0131) 				}
(0132) 				
(0133) 				// 计算平均值
(0134) 					ADC_Values_0[0] = sum[0]/10;  // 通道0平均值
    00765 E02A      LDI	R18,0xA
    00766 E030      LDI	R19,0
    00767 9100 008C LDS	R16,sum
    00769 9110 008D LDS	R17,sum+1
    0076B 940E 07B3 CALL	div16u
    0076D 9310 006A STS	ADC_Values_0+1,R17
    0076F 9300 0069 STS	ADC_Values_0,R16
(0135) 					ADC_Values_0[1] = sum[1]/10;  // 通道1平均值
    00771 E02A      LDI	R18,0xA
    00772 E030      LDI	R19,0
    00773 9100 008E LDS	R16,sum+2
    00775 9110 008F LDS	R17,sum+3
    00777 940E 07B3 CALL	div16u
    00779 9310 006C STS	ADC_Values_0+3,R17
    0077B 9300 006B STS	ADC_Values_0+2,R16
(0136) 					//ADC_Values[2] = sum[2]/10;  // 通道2平均值
(0137) 					//ADC_Values[3] = sum[3]/10;  // 通道3平均值
(0138) 					sum[0] = 0;  // 通道0
    0077D 2422      CLR	R2
    0077E 2433      CLR	R3
    0077F 9230 008D STS	sum+1,R3
    00781 9220 008C STS	sum,R2
(0139)     				sum[1] = 0;  // 通道1
    00783 9230 008F STS	sum+3,R3
    00785 9220 008E STS	sum+2,R2
(0140)     				sum[2] = 0;  // 通道2
    00787 9230 0091 STS	sum+5,R3
    00789 9220 0090 STS	sum+4,R2
(0141)     				sum[3] = 0;  // 通道3
    0078B 9230 0093 STS	sum+7,R3
    0078D 9220 0092 STS	sum+6,R2
(0142)                 
(0143) 				Key_Flags |= FLAG_START;
    0078F 9180 0072 LDS	R24,Key_Flags
    00791 6084      ORI	R24,4
    00792 9380 0072 STS	Key_Flags,R24
(0144)             }
(0145)         }
(0146)     }
(0147) 	
(0148)     
(0149)     // 更新上一次按键状态
(0150)     key_open_last = key_open_current;
    00794 92E0 009E STS	keys.c:key_open_last,R14
(0151)     key_short_last = key_short_current;
    00796 92C0 009F STS	keys.c:key_short_last,R12
(0152)     key_start_last = key_start_current;
    00798 92A0 00A0 STS	keys.c:key_start_last,R10
    0079A 940C 07D9 JMP	pop_xgset30FC
(0153) }
(0154) 
(0155) // 清除ADC数据
(0156) void Clear_ADC_Data(void) {
(0157)     unsigned char i;
(0158)     for(i = 0; i < ADC_DATA_SIZE; i++) {
_Clear_ADC_Data:
  i                    --> R16
    0079C 2700      CLR	R16
    0079D C00D      RJMP	0x07AB
(0159)         ADC_Values_0[i] = 0;
    0079E E689      LDI	R24,0x69
    0079F E090      LDI	R25,0
    007A0 2FE0      MOV	R30,R16
    007A1 27FF      CLR	R31
    007A2 0FEE      LSL	R30
    007A3 1FFF      ROL	R31
    007A4 0FE8      ADD	R30,R24
    007A5 1FF9      ADC	R31,R25
    007A6 2422      CLR	R2
    007A7 2433      CLR	R3
    007A8 8231      STD	Z+1,R3
    007A9 8220      ST	Z,R2
    007AA 9503      INC	R16
    007AB 3004      CPI	R16,4
    007AC F388      BCS	0x079E
(0160)     }
(0161)     Key_Flags = FLAG_NONE;
FILE: <library>
    007AD 2422      CLR	R2
    007AE 9220 0072 STS	Key_Flags,R2
    007B0 9508      RET
mod16u:
    007B1 9468      BSET	6
    007B2 C001      RJMP	xdiv16u
div16u:
    007B3 94E8      BCLR	6
xdiv16u:
    007B4 92EA      ST	-Y,R14
    007B5 92FA      ST	-Y,R15
    007B6 938A      ST	-Y,R24
    007B7 24EE      CLR	R14
    007B8 24FF      CLR	R15
    007B9 E180      LDI	R24,0x10
    007BA 0F00      LSL	R16
    007BB 1F11      ROL	R17
    007BC 1CEE      ROL	R14
    007BD 1CFF      ROL	R15
    007BE 16E2      CP	R14,R18
    007BF 06F3      CPC	R15,R19
    007C0 F018      BCS	0x07C4
    007C1 1AE2      SUB	R14,R18
    007C2 0AF3      SBC	R15,R19
    007C3 9503      INC	R16
    007C4 958A      DEC	R24
    007C5 F7A1      BNE	0x07BA
    007C6 F416      BRTC	0x07C9
    007C7 2D0E      MOV	R16,R14
    007C8 2D1F      MOV	R17,R15
    007C9 9189      LD	R24,Y+
    007CA 90F9      LD	R15,Y+
    007CB 90E9      LD	R14,Y+
    007CC 9508      RET
pop_xgset003C:
    007CD 90A9      LD	R10,Y+
    007CE 90B9      LD	R11,Y+
    007CF 90C9      LD	R12,Y+
    007D0 90D9      LD	R13,Y+
    007D1 9508      RET
pop_xgset00FC:
    007D2 90A9      LD	R10,Y+
    007D3 90B9      LD	R11,Y+
    007D4 90C9      LD	R12,Y+
    007D5 90D9      LD	R13,Y+
    007D6 90E9      LD	R14,Y+
    007D7 90F9      LD	R15,Y+
    007D8 9508      RET
pop_xgset30FC:
    007D9 90A9      LD	R10,Y+
    007DA 90B9      LD	R11,Y+
    007DB 90C9      LD	R12,Y+
    007DC 90D9      LD	R13,Y+
    007DD 90E9      LD	R14,Y+
    007DE 90F9      LD	R15,Y+
    007DF 9149      LD	R20,Y+
    007E0 9159      LD	R21,Y+
    007E1 9508      RET
push_xgsetF0FC:
    007E2 937A      ST	-Y,R23
    007E3 936A      ST	-Y,R22
push_xgset30FC:
    007E4 935A      ST	-Y,R21
    007E5 934A      ST	-Y,R20
push_xgset00FC:
    007E6 92FA      ST	-Y,R15
    007E7 92EA      ST	-Y,R14
push_xgset003C:
    007E8 92DA      ST	-Y,R13
    007E9 92CA      ST	-Y,R12
    007EA 92BA      ST	-Y,R11
    007EB 92AA      ST	-Y,R10
    007EC 9508      RET
push_xgsetF000:
    007ED 937A      ST	-Y,R23
    007EE 936A      ST	-Y,R22
    007EF 935A      ST	-Y,R21
    007F0 934A      ST	-Y,R20
    007F1 9508      RET
pop_xgsetF000:
    007F2 9149      LD	R20,Y+
    007F3 9159      LD	R21,Y+
    007F4 9169      LD	R22,Y+
    007F5 9179      LD	R23,Y+
    007F6 9508      RET
neg32:
    007F7 9500      COM	R16
    007F8 9510      COM	R17
    007F9 9520      COM	R18
    007FA 9530      COM	R19
    007FB 5F0F      SUBI	R16,0xFF
    007FC 4F1F      SBCI	R17,0xFF
    007FD 4F2F      SBCI	R18,0xFF
    007FE 4F3F      SBCI	R19,0xFF
    007FF 9508      RET
lpm32:
    00800 93EA      ST	-Y,R30
    00801 93FA      ST	-Y,R31
    00802 920A      ST	-Y,R0
    00803 2FE0      MOV	R30,R16
    00804 2FF1      MOV	R31,R17
    00805 95C8      LPM
    00806 2D00      MOV	R16,R0
    00807 9631      ADIW	R30,1
    00808 95C8      LPM
    00809 2D10      MOV	R17,R0
    0080A 9631      ADIW	R30,1
    0080B 95C8      LPM
    0080C 2D20      MOV	R18,R0
    0080D 9631      ADIW	R30,1
    0080E 95C8      LPM
    0080F 2D30      MOV	R19,R0
    00810 9009      LD	R0,Y+
    00811 91F9      LD	R31,Y+
    00812 91E9      LD	R30,Y+
    00813 9508      RET
fpsub:
    00814 9468      BSET	6
    00815 C001      RJMP	fpadd_alt
fpadd:
    00816 94E8      BCLR	6
fpadd_alt:
    00817 940E 0A00 CALL	saveFPRegs
    00819 940E 0992 CALL	unpacks
    0081B F409      BNE	0x081D
    0081C C048      RJMP	0x0865
    0081D 2CE6      MOV	R14,R6
    0081E 2CD5      MOV	R13,R5
    0081F 2CC4      MOV	R12,R4
    00820 2EB3      MOV	R11,R19
    00821 2EA2      MOV	R10,R18
    00822 2E91      MOV	R9,R17
    00823 2E80      MOV	R8,R16
    00824 8100      LD	R16,Z
    00825 8111      LDD	R17,Z+1
    00826 8122      LDD	R18,Z+2
    00827 8133      LDD	R19,Z+3
    00828 940E 0992 CALL	unpacks
    0082A F409      BNE	0x082C
    0082B C044      RJMP	0x0870
    0082C 2D84      MOV	R24,R4
    0082D 2D95      MOV	R25,R5
    0082E 198C      SUB	R24,R12
    0082F 099D      SBC	R25,R13
    00830 F0B9      BEQ	0x0848
    00831 F472      BPL	0x0840
    00832 9590      COM	R25
    00833 9580      COM	R24
    00834 9601      ADIW	R24,1
    00835 2C4C      MOV	R4,R12
    00836 2C5D      MOV	R5,R13
    00837 3188      CPI	R24,0x18
    00838 F5B8      BCC	0x0870
    00839 9535      ASR	R19
    0083A 9527      ROR	R18
    0083B 9517      ROR	R17
    0083C 9507      ROR	R16
    0083D 9701      SBIW	R24,1
    0083E F7D1      BNE	0x0839
    0083F C008      RJMP	0x0848
    00840 3188      CPI	R24,0x18
    00841 F518      BCC	0x0865
    00842 94B5      ASR	R11
    00843 94A7      ROR	R10
    00844 9497      ROR	R9
    00845 9487      ROR	R8
    00846 9701      SBIW	R24,1
    00847 F7D1      BNE	0x0842
    00848 2466      CLR	R6
    00849 F02E      BRTS	0x084F
    0084A 0D08      ADD	R16,R8
    0084B 1D19      ADC	R17,R9
    0084C 1D2A      ADC	R18,R10
    0084D 1D3B      ADC	R19,R11
    0084E C009      RJMP	0x0858
    0084F 1A80      SUB	R8,R16
    00850 0A91      SBC	R9,R17
    00851 0AA2      SBC	R10,R18
    00852 0AB3      SBC	R11,R19
    00853 2D08      MOV	R16,R8
    00854 2D19      MOV	R17,R9
    00855 2D2A      MOV	R18,R10
    00856 2D3B      MOV	R19,R11
    00857 2333      TST	R19
    00858 F422      BPL	0x085D
    00859 940E 07F7 CALL	neg32
    0085B E880      LDI	R24,0x80
    0085C 2E68      MOV	R6,R24
    0085D 940E 09BB CALL	normalize_and_pack
    0085F C002      RJMP	0x0862
    00860 940E 09F0 CALL	pack
    00862 940E 0A0F CALL	restoreFPRegs
    00864 9508      RET
    00865 8100      LD	R16,Z
    00866 8111      LDD	R17,Z+1
    00867 8122      LDD	R18,Z+2
    00868 8133      LDD	R19,Z+3
    00869 F7C6      BRTC	0x0862
    0086A 940E 099A CALL	tstR16_R19
    0086C F3A9      BEQ	0x0862
    0086D E880      LDI	R24,0x80
    0086E 2738      EOR	R19,R24
    0086F CFF2      RJMP	0x0862
    00870 2D08      MOV	R16,R8
    00871 2D19      MOV	R17,R9
    00872 2D2A      MOV	R18,R10
    00873 2D3B      MOV	R19,R11
    00874 2C4C      MOV	R4,R12
    00875 2C5D      MOV	R5,R13
    00876 2C6E      MOV	R6,R14
    00877 2333      TST	R19
    00878 F73A      BPL	0x0860
    00879 940E 07F7 CALL	neg32
    0087B E880      LDI	R24,0x80
    0087C 2E68      MOV	R6,R24
    0087D CFE2      RJMP	0x0860
fpadd2:
    0087E 93FA      ST	-Y,R31
    0087F 93EA      ST	-Y,R30
    00880 2FEC      MOV	R30,R28
    00881 2FFD      MOV	R31,R29
    00882 9632      ADIW	R30,2
    00883 940E 0816 CALL	fpadd
    00885 91E9      LD	R30,Y+
    00886 91F9      LD	R31,Y+
    00887 9624      ADIW	R28,4
    00888 9508      RET
fpadd2x:
    00889 93FA      ST	-Y,R31
    0088A 93EA      ST	-Y,R30
    0088B 2FEC      MOV	R30,R28
    0088C 2FFD      MOV	R31,R29
    0088D 9632      ADIW	R30,2
    0088E 940E 0816 CALL	fpadd
    00890 91E9      LD	R30,Y+
    00891 91F9      LD	R31,Y+
    00892 833B      STD	Y+3,R19
    00893 832A      STD	Y+2,R18
    00894 8319      STD	Y+1,R17
    00895 8308      ST	Y,R16
    00896 9508      RET
fpsub2:
    00897 93FA      ST	-Y,R31
    00898 93EA      ST	-Y,R30
    00899 2FEC      MOV	R30,R28
    0089A 2FFD      MOV	R31,R29
    0089B 9632      ADIW	R30,2
    0089C 940E 0814 CALL	fpsub
    0089E 91E9      LD	R30,Y+
    0089F 91F9      LD	R31,Y+
    008A0 9624      ADIW	R28,4
    008A1 9508      RET
fpint:
    008A2 924A      ST	-Y,R4
    008A3 925A      ST	-Y,R5
    008A4 926A      ST	-Y,R6
    008A5 938A      ST	-Y,R24
    008A6 940E 09A2 CALL	unpacku
    008A8 F111      BEQ	0x08CB
    008A9 2055      TST	R5
    008AA F0E2      BMI	0x08C7
    008AB E18F      LDI	R24,0x1F
    008AC 1648      CP	R4,R24
    008AD F4C0      BCC	0x08C6
    008AE E187      LDI	R24,0x17
    008AF 1648      CP	R4,R24
    008B0 F0D1      BEQ	0x08CB
    008B1 F458      BCC	0x08BD
    008B2 9441      NEG	R4
    008B3 EE89      LDI	R24,0xE9
    008B4 1A48      SUB	R4,R24
    008B5 C005      RJMP	0x08BB
    008B6 9535      ASR	R19
    008B7 9527      ROR	R18
    008B8 9517      ROR	R17
    008B9 9507      ROR	R16
    008BA 944A      DEC	R4
    008BB F7D1      BNE	0x08B6
    008BC C00E      RJMP	0x08CB
    008BD E187      LDI	R24,0x17
    008BE 1A48      SUB	R4,R24
    008BF 0F00      LSL	R16
    008C0 1F11      ROL	R17
    008C1 1F22      ROL	R18
    008C2 1F33      ROL	R19
    008C3 944A      DEC	R4
    008C4 F7D1      BNE	0x08BF
    008C5 C005      RJMP	0x08CB
    008C6 E73F      LDI	R19,0x7F
    008C7 2F23      MOV	R18,R19
    008C8 2F13      MOV	R17,R19
    008C9 2F03      MOV	R16,R19
    008CA C004      RJMP	0x08CF
    008CB 2066      TST	R6
    008CC F011      BEQ	0x08CF
    008CD 940E 07F7 CALL	neg32
    008CF 9189      LD	R24,Y+
    008D0 9069      LD	R6,Y+
    008D1 9059      LD	R5,Y+
    008D2 9049      LD	R4,Y+
    008D3 9508      RET
uint2fp:
    008D4 9468      BSET	6
    008D5 C001      RJMP	0x08D7
int2fp:
    008D6 94E8      BCLR	6
    008D7 2722      CLR	R18
    008D8 2733      CLR	R19
    008D9 F046      BRTS	0x08E2
    008DA FD17      SBRC	R17,7
    008DB 9520      COM	R18
    008DC FD17      SBRC	R17,7
    008DD 9530      COM	R19
    008DE C003      RJMP	0x08E2
ulong2fp:
    008DF 9468      BSET	6
    008E0 C001      RJMP	0x08E2
long2fp:
    008E1 94E8      BCLR	6
    008E2 924A      ST	-Y,R4
    008E3 925A      ST	-Y,R5
    008E4 926A      ST	-Y,R6
    008E5 938A      ST	-Y,R24
    008E6 E187      LDI	R24,0x17
    008E7 2E48      MOV	R4,R24
    008E8 2455      CLR	R5
    008E9 2466      CLR	R6
    008EA F036      BRTS	0x08F1
    008EB 2333      TST	R19
    008EC F422      BPL	0x08F1
    008ED 940E 07F7 CALL	neg32
    008EF E880      LDI	R24,0x80
    008F0 2E68      MOV	R6,R24
    008F1 940E 09BB CALL	normalize_and_pack
    008F3 9189      LD	R24,Y+
    008F4 9069      LD	R6,Y+
    008F5 9059      LD	R5,Y+
    008F6 9049      LD	R4,Y+
    008F7 9508      RET
fpdiv1:
    008F8 93FA      ST	-Y,R31
    008F9 93EA      ST	-Y,R30
    008FA 81EA      LDD	R30,Y+2
    008FB 81FB      LDD	R31,Y+3
    008FC D027      RCALL	0x0924
    008FD 91E9      LD	R30,Y+
    008FE 91F9      LD	R31,Y+
    008FF 9622      ADIW	R28,2
    00900 9508      RET
fpdiv2:
    00901 93FA      ST	-Y,R31
    00902 93EA      ST	-Y,R30
    00903 2FEC      MOV	R30,R28
    00904 2FFD      MOV	R31,R29
    00905 9632      ADIW	R30,2
    00906 D01D      RCALL	0x0924
    00907 91E9      LD	R30,Y+
    00908 91F9      LD	R31,Y+
    00909 9624      ADIW	R28,4
    0090A 9508      RET
fpdiv1x:
    0090B 93FA      ST	-Y,R31
    0090C 93EA      ST	-Y,R30
    0090D 81EA      LDD	R30,Y+2
    0090E 81FB      LDD	R31,Y+3
    0090F D014      RCALL	0x0924
    00910 91E9      LD	R30,Y+
    00911 91F9      LD	R31,Y+
    00912 8339      STD	Y+1,R19
    00913 8328      ST	Y,R18
    00914 931A      ST	-Y,R17
    00915 930A      ST	-Y,R16
    00916 9508      RET
fpdiv2x:
    00917 93FA      ST	-Y,R31
    00918 93EA      ST	-Y,R30
    00919 2FEC      MOV	R30,R28
    0091A 2FFD      MOV	R31,R29
    0091B 9632      ADIW	R30,2
    0091C D007      RCALL	0x0924
    0091D 91E9      LD	R30,Y+
    0091E 91F9      LD	R31,Y+
    0091F 833B      STD	Y+3,R19
    00920 832A      STD	Y+2,R18
    00921 8319      STD	Y+1,R17
    00922 8308      ST	Y,R16
    00923 9508      RET
    00924 920A      ST	-Y,R0
    00925 921A      ST	-Y,R1
    00926 922A      ST	-Y,R2
    00927 923A      ST	-Y,R3
    00928 940E 0A00 CALL	saveFPRegs
    0092A 933A      ST	-Y,R19
    0092B 932A      ST	-Y,R18
    0092C 931A      ST	-Y,R17
    0092D 930A      ST	-Y,R16
    0092E 8100      LD	R16,Z
    0092F 8111      LDD	R17,Z+1
    00930 8122      LDD	R18,Z+2
    00931 8133      LDD	R19,Z+3
    00932 940E 09A2 CALL	unpacku
    00934 F409      BNE	0x0936
    00935 C057      RJMP	0x098D
    00936 2CE6      MOV	R14,R6
    00937 2CD5      MOV	R13,R5
    00938 2CC4      MOV	R12,R4
    00939 2EB3      MOV	R11,R19
    0093A 2EA2      MOV	R10,R18
    0093B 2E91      MOV	R9,R17
    0093C 2E80      MOV	R8,R16
    0093D 9109      LD	R16,Y+
    0093E 9119      LD	R17,Y+
    0093F 9129      LD	R18,Y+
    00940 9139      LD	R19,Y+
    00941 940E 09A2 CALL	unpacku
    00943 F1A1      BEQ	0x0978
    00944 246E      EOR	R6,R14
    00945 184C      SUB	R4,R12
    00946 085D      SBC	R5,R13
    00947 E880      LDI	R24,0x80
    00948 1648      CP	R4,R24
    00949 0653      CPC	R5,R19
    0094A F00C      BLT	0x094C
    0094B C033      RJMP	0x097F
    0094C E881      LDI	R24,0x81
    0094D 1648      CP	R4,R24
    0094E EF8F      LDI	R24,0xFF
    0094F 0658      CPC	R5,R24
    00950 F40C      BGE	0x0952
    00951 C036      RJMP	0x0988
    00952 E280      LDI	R24,0x20
    00953 2433      CLR	R3
    00954 2E23      MOV	R2,R19
    00955 2E12      MOV	R1,R18
    00956 2E01      MOV	R0,R17
    00957 2F30      MOV	R19,R16
    00958 2722      CLR	R18
    00959 2711      CLR	R17
    0095A 2700      CLR	R16
    0095B 9426      LSR	R2
    0095C 9417      ROR	R1
    0095D 9407      ROR	R0
    0095E 9537      ROR	R19
    0095F 9527      ROR	R18
    00960 0F00      LSL	R16
    00961 1F11      ROL	R17
    00962 1F22      ROL	R18
    00963 1F33      ROL	R19
    00964 1C00      ROL	R0
    00965 1C11      ROL	R1
    00966 1C22      ROL	R2
    00967 1C33      ROL	R3
    00968 F028      BCS	0x096E
    00969 1808      SUB	R0,R8
    0096A 0819      SBC	R1,R9
    0096B 082A      SBC	R2,R10
    0096C 083B      SBC	R3,R11
    0096D C004      RJMP	0x0972
    0096E 0C08      ADD	R0,R8
    0096F 1C19      ADC	R1,R9
    00970 1C2A      ADC	R2,R10
    00971 1C3B      ADC	R3,R11
    00972 F00A      BMI	0x0974
    00973 6001      ORI	R16,1
    00974 958A      DEC	R24
    00975 F751      BNE	0x0960
    00976 940E 09BB CALL	normalize_and_pack
    00978 940E 0A0F CALL	restoreFPRegs
    0097A 9039      LD	R3,Y+
    0097B 9029      LD	R2,Y+
    0097C 9019      LD	R1,Y+
    0097D 9009      LD	R0,Y+
    0097E 9508      RET
    0097F EF0F      LDI	R16,0xFF
    00980 2F10      MOV	R17,R16
    00981 E72F      LDI	R18,0x7F
    00982 E73F      LDI	R19,0x7F
    00983 2066      TST	R6
    00984 F399      BEQ	0x0978
    00985 940E 07F7 CALL	neg32
    00987 CFF0      RJMP	0x0978
    00988 2700      CLR	R16
    00989 2F10      MOV	R17,R16
    0098A 2F20      MOV	R18,R16
    0098B 2F30      MOV	R19,R16
    0098C CFEB      RJMP	0x0978
    0098D 9109      LD	R16,Y+
    0098E 9119      LD	R17,Y+
    0098F 9129      LD	R18,Y+
    00990 9139      LD	R19,Y+
    00991 CFED      RJMP	0x097F
unpacks:
    00992 D00F      RCALL	unpacku
    00993 F029      BEQ	0x0999
    00994 2066      TST	R6
    00995 F011      BEQ	0x0998
    00996 940E 07F7 CALL	neg32
    00998 9498      BCLR	1
    00999 9508      RET
tstR16_R19:
    0099A 2300      TST	R16
    0099B F429      BNE	0x09A1
    0099C 2311      TST	R17
    0099D F419      BNE	0x09A1
    0099E 2322      TST	R18
    0099F F409      BNE	0x09A1
    009A0 2333      TST	R19
    009A1 9508      RET
unpacku:
    009A2 DFF7      RCALL	tstR16_R19
    009A3 F099      BEQ	0x09B7
    009A4 938A      ST	-Y,R24
    009A5 2E63      MOV	R6,R19
    009A6 E880      LDI	R24,0x80
    009A7 2268      AND	R6,R24
    009A8 0F22      LSL	R18
    009A9 1F33      ROL	R19
    009AA 2E43      MOV	R4,R19
    009AB E78F      LDI	R24,0x7F
    009AC 1A48      SUB	R4,R24
    009AD 2455      CLR	R5
    009AE 2788      CLR	R24
    009AF 0A58      SBC	R5,R24
    009B0 9526      LSR	R18
    009B1 E830      LDI	R19,0x80
    009B2 2B23      OR	R18,R19
    009B3 2733      CLR	R19
    009B4 9189      LD	R24,Y+
    009B5 9498      BCLR	1
    009B6 9508      RET
    009B7 2444      CLR	R4
    009B8 2455      CLR	R5
    009B9 2466      CLR	R6
    009BA 9508      RET
normalize_and_pack:
    009BB DFDE      RCALL	tstR16_R19
    009BC F409      BNE	0x09BE
    009BD 9508      RET
    009BE 93AA      ST	-Y,R26
    009BF 93BA      ST	-Y,R27
    009C0 01D2      MOVW	R26,R4
    009C1 939A      ST	-Y,R25
    009C2 938A      ST	-Y,R24
    009C3 E78E      LDI	R24,0x7E
    009C4 E090      LDI	R25,0
    009C5 2333      TST	R19
    009C6 F049      BEQ	0x09D0
    009C7 9536      LSR	R19
    009C8 9527      ROR	R18
    009C9 9517      ROR	R17
    009CA 9507      ROR	R16
    009CB 17A8      CP	R26,R24
    009CC 07B9      CPC	R27,R25
    009CD F4CC      BGE	0x09E7
    009CE 9611      ADIW	R26,1
    009CF CFF5      RJMP	0x09C5
    009D0 9580      COM	R24
    009D1 9590      COM	R25
    009D2 9601      ADIW	R24,1
    009D3 2322      TST	R18
    009D4 F0BA      BMI	0x09EC
    009D5 0F00      LSL	R16
    009D6 1F11      ROL	R17
    009D7 1F22      ROL	R18
    009D8 17A8      CP	R26,R24
    009D9 07B9      CPC	R27,R25
    009DA F014      BLT	0x09DD
    009DB 9711      SBIW	R26,1
    009DC CFF6      RJMP	0x09D3
    009DD 2700      CLR	R16
    009DE 2711      CLR	R17
    009DF 2722      CLR	R18
    009E0 2733      CLR	R19
    009E1 9189      LD	R24,Y+
    009E2 9199      LD	R25,Y+
    009E3 012D      MOVW	R4,R26
    009E4 91B9      LD	R27,Y+
    009E5 91A9      LD	R26,Y+
    009E6 9508      RET
    009E7 2733      CLR	R19
    009E8 EF0F      LDI	R16,0xFF
    009E9 2F10      MOV	R17,R16
    009EA E72F      LDI	R18,0x7F
    009EB 2F32      MOV	R19,R18
    009EC 9189      LD	R24,Y+
    009ED 9199      LD	R25,Y+
    009EE 012D      MOVW	R4,R26
    009EF C002      RJMP	0x09F2
pack:
    009F0 93AA      ST	-Y,R26
    009F1 93BA      ST	-Y,R27
    009F2 DFA7      RCALL	tstR16_R19
    009F3 F049      BEQ	0x09FD
    009F4 01D2      MOVW	R26,R4
    009F5 58A1      SUBI	R26,0x81
    009F6 4FBF      SBCI	R27,0xFF
    009F7 012D      MOVW	R4,R26
    009F8 2D34      MOV	R19,R4
    009F9 0F22      LSL	R18
    009FA 9536      LSR	R19
    009FB 9527      ROR	R18
    009FC 2936      OR	R19,R6
    009FD 91B9      LD	R27,Y+
    009FE 91A9      LD	R26,Y+
    009FF 9508      RET
saveFPRegs:
    00A00 924A      ST	-Y,R4
    00A01 925A      ST	-Y,R5
    00A02 926A      ST	-Y,R6
    00A03 927A      ST	-Y,R7
    00A04 928A      ST	-Y,R8
    00A05 929A      ST	-Y,R9
    00A06 92AA      ST	-Y,R10
    00A07 92BA      ST	-Y,R11
    00A08 92CA      ST	-Y,R12
    00A09 92DA      ST	-Y,R13
    00A0A 92EA      ST	-Y,R14
    00A0B 92FA      ST	-Y,R15
    00A0C 938A      ST	-Y,R24
    00A0D 939A      ST	-Y,R25
    00A0E 9508      RET
restoreFPRegs:
    00A0F 9199      LD	R25,Y+
    00A10 9189      LD	R24,Y+
    00A11 90F9      LD	R15,Y+
    00A12 90E9      LD	R14,Y+
    00A13 90D9      LD	R13,Y+
    00A14 90C9      LD	R12,Y+
    00A15 90B9      LD	R11,Y+
    00A16 90A9      LD	R10,Y+
    00A17 9099      LD	R9,Y+
    00A18 9089      LD	R8,Y+
    00A19 9079      LD	R7,Y+
    00A1A 9069      LD	R6,Y+
    00A1B 9059      LD	R5,Y+
    00A1C 9049      LD	R4,Y+
    00A1D 9508      RET
fpmule:
    00A1E 940E 0A00 CALL	saveFPRegs
    00A20 93AA      ST	-Y,R26
    00A21 93BA      ST	-Y,R27
    00A22 940E 09A2 CALL	unpacku
    00A24 F1E1      BEQ	0x0A61
    00A25 2CE6      MOV	R14,R6
    00A26 2CD5      MOV	R13,R5
    00A27 2CC4      MOV	R12,R4
    00A28 2EB3      MOV	R11,R19
    00A29 2EA2      MOV	R10,R18
    00A2A 2E91      MOV	R9,R17
    00A2B 2E80      MOV	R8,R16
    00A2C 8100      LD	R16,Z
    00A2D 8111      LDD	R17,Z+1
    00A2E 8122      LDD	R18,Z+2
    00A2F 8133      LDD	R19,Z+3
    00A30 940E 09A2 CALL	unpacku
    00A32 F171      BEQ	0x0A61
    00A33 246E      EOR	R6,R14
    00A34 0C4C      ADD	R4,R12
    00A35 1C5D      ADC	R5,R13
    00A36 E880      LDI	R24,0x80
    00A37 1648      CP	R4,R24
    00A38 0653      CPC	R5,R19
    00A39 F564      BGE	0x0A66
    00A3A E881      LDI	R24,0x81
    00A3B 1648      CP	R4,R24
    00A3C EF8F      LDI	R24,0xFF
    00A3D 0658      CPC	R5,R24
    00A3E F16C      BLT	0x0A6C
    00A3F 9EA2      MUL	R10,R18
    00A40 2DB1      MOV	R27,R1
    00A41 2DA0      MOV	R26,R0
    00A42 9E91      MUL	R9,R17
    00A43 2D91      MOV	R25,R1
    00A44 2D80      MOV	R24,R0
    00A45 9EA0      MUL	R10,R16
    00A46 0D80      ADD	R24,R0
    00A47 1D91      ADC	R25,R1
    00A48 1FA3      ADC	R26,R19
    00A49 1FB3      ADC	R27,R19
    00A4A 9E82      MUL	R8,R18
    00A4B 0D80      ADD	R24,R0
    00A4C 1D91      ADC	R25,R1
    00A4D 1FA3      ADC	R26,R19
    00A4E 1FB3      ADC	R27,R19
    00A4F 9E92      MUL	R9,R18
    00A50 0D90      ADD	R25,R0
    00A51 1DA1      ADC	R26,R1
    00A52 1FB3      ADC	R27,R19
    00A53 9EA1      MUL	R10,R17
    00A54 0D90      ADD	R25,R0
    00A55 1DA1      ADC	R26,R1
    00A56 1FB3      ADC	R27,R19
    00A57 2F2B      MOV	R18,R27
    00A58 2F1A      MOV	R17,R26
    00A59 2F09      MOV	R16,R25
    00A5A 0F88      LSL	R24
    00A5B 1F00      ROL	R16
    00A5C 1F11      ROL	R17
    00A5D 1F22      ROL	R18
    00A5E 1F33      ROL	R19
    00A5F 940E 09BB CALL	normalize_and_pack
    00A61 91B9      LD	R27,Y+
    00A62 91A9      LD	R26,Y+
    00A63 940E 0A0F CALL	restoreFPRegs
    00A65 9508      RET
    00A66 EF0F      LDI	R16,0xFF
    00A67 2F10      MOV	R17,R16
    00A68 E72F      LDI	R18,0x7F
    00A69 E78F      LDI	R24,0x7F
    00A6A 2E48      MOV	R4,R24
    00A6B CFF5      RJMP	0x0A61
    00A6C 2700      CLR	R16
    00A6D 2F10      MOV	R17,R16
    00A6E 2F20      MOV	R18,R16
    00A6F 2F30      MOV	R19,R16
    00A70 CFF0      RJMP	0x0A61
fpmule1:
    00A71 93FA      ST	-Y,R31
    00A72 93EA      ST	-Y,R30
    00A73 81EA      LDD	R30,Y+2
    00A74 81FB      LDD	R31,Y+3
    00A75 940E 0A1E CALL	fpmule
    00A77 91E9      LD	R30,Y+
    00A78 91F9      LD	R31,Y+
    00A79 9622      ADIW	R28,2
    00A7A 9508      RET
fpmule2:
    00A7B 93FA      ST	-Y,R31
    00A7C 93EA      ST	-Y,R30
    00A7D 2FEC      MOV	R30,R28
    00A7E 2FFD      MOV	R31,R29
    00A7F 9632      ADIW	R30,2
    00A80 940E 0A1E CALL	fpmule
    00A82 91E9      LD	R30,Y+
    00A83 91F9      LD	R31,Y+
    00A84 9624      ADIW	R28,4
    00A85 9508      RET
fpmule1x:
    00A86 93FA      ST	-Y,R31
    00A87 93EA      ST	-Y,R30
    00A88 81EA      LDD	R30,Y+2
    00A89 81FB      LDD	R31,Y+3
    00A8A 940E 0A1E CALL	fpmule
    00A8C 91E9      LD	R30,Y+
    00A8D 91F9      LD	R31,Y+
    00A8E 8339      STD	Y+1,R19
    00A8F 8328      ST	Y,R18
    00A90 931A      ST	-Y,R17
    00A91 930A      ST	-Y,R16
    00A92 9508      RET
fpmule2x:
    00A93 93FA      ST	-Y,R31
    00A94 93EA      ST	-Y,R30
    00A95 2FEC      MOV	R30,R28
    00A96 2FFD      MOV	R31,R29
    00A97 9632      ADIW	R30,2
    00A98 940E 0A1E CALL	fpmule
    00A9A 91E9      LD	R30,Y+
    00A9B 91F9      LD	R31,Y+
    00A9C 833B      STD	Y+3,R19
    00A9D 832A      STD	Y+2,R18
    00A9E 8319      STD	Y+1,R17
    00A9F 8308      ST	Y,R16
    00AA0 9508      RET
